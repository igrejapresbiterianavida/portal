<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta name="description" content="Dashboard - Igreja Presbiteriana Vida">
  <title>Dashboard | IPV - Igreja Presbiteriana Vida</title>
  
  <!-- Favicon -->
  <link rel="icon" type="image/svg+xml" href="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'><text y='0.9em' font-size='90'>‚õ™</text></svg>">
  
  <!-- CSS -->
  <link rel="stylesheet" href="css/globais.css">
  <link rel="stylesheet" href="css/componentes.css">
  <link rel="stylesheet" href="css/animacoes.css">
  <link rel="stylesheet" href="css/mobile.css">
  <link rel="stylesheet" href="css/desktop.css">
  
  <!-- Alpine.js -->
  <script defer src="https://cdn.jsdelivr.net/npm/alpinejs@3.x.x/dist/cdn.min.js"></script>
  
  <!-- Material Icons -->
  <link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">
  
  <style>
    .dashboard-header {
      background: linear-gradient(135deg, var(--verde-escuro) 0%, var(--verde-medio) 100%);
      color: var(--branco);
      padding: 50px 20px;
      text-align: center;
      margin-top: 70px;
    }
    
    .user-welcome {
      display: flex;
      align-items: center;
      justify-content: center;
      gap: 20px;
      margin-bottom: 20px;
    }
    
    .user-avatar-large {
      width: 80px;
      height: 80px;
      border-radius: 50%;
      border: 4px solid var(--branco);
    }
    
    .welcome-text h1 {
      margin: 0;
      font-size: clamp(1.5rem, 4vw, 2.5rem);
    }
    
    .welcome-text p {
      margin: 5px 0 0 0;
      opacity: 0.9;
    }
    
    .dashboard-actions {
      display: flex;
      gap: 15px;
      justify-content: center;
      flex-wrap: wrap;
    }
    
    .action-btn {
      background: rgba(255,255,255,0.2);
      color: var(--branco);
      border: 1px solid rgba(255,255,255,0.3);
      padding: 12px 20px;
      border-radius: 25px;
      text-decoration: none;
      transition: var(--transicao-padrao);
      display: flex;
      align-items: center;
      gap: 8px;
    }
    
    .action-btn:hover {
      background: rgba(255,255,255,0.3);
      transform: translateY(-2px);
    }
    
    .quick-access {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
      gap: 25px;
      margin: 40px 0;
    }
    
    .access-card {
      background: var(--branco);
      border-radius: 15px;
      padding: 25px;
      text-align: center;
      box-shadow: var(--sombra-suave);
      transition: var(--transicao-padrao);
      cursor: pointer;
      border: 2px solid transparent;
    }
    
    .access-card:hover {
      transform: translateY(-5px);
      box-shadow: var(--sombra-media);
      border-color: var(--verde-medio);
    }
    
    .access-icon {
      width: 60px;
      height: 60px;
      border-radius: 15px;
      display: flex;
      align-items: center;
      justify-content: center;
      margin: 0 auto 15px;
      font-size: 28px;
      color: var(--branco);
    }
    
    .access-icon.devocionais { background: linear-gradient(135deg, #f093fb 0%, #f5576c 100%); }
    .access-icon.videos { background: linear-gradient(135deg, #4facfe 0%, #00f2fe 100%); }
    .access-icon.programacao { background: linear-gradient(135deg, #43e97b 0%, #38f9d7 100%); }
    .access-icon.perfil { background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); }
    
    .access-card h3 {
      margin: 0 0 10px 0;
      color: var(--verde-escuro);
      font-size: 1.2rem;
    }
    
    .access-card p {
      margin: 0;
      color: var(--cinza-medio);
      font-size: 0.9rem;
    }
    
    .user-info-section {
      background: var(--branco);
      border-radius: 15px;
      padding: 30px;
      margin: 30px 0;
      box-shadow: var(--sombra-suave);
    }
    
    .info-grid {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
      gap: 20px;
    }
    
    .info-item {
      padding: 15px;
      background: var(--cinza-muito-claro);
      border-radius: 10px;
    }
    
    .info-label {
      font-size: 0.8rem;
      color: var(--cinza-medio);
      text-transform: uppercase;
      letter-spacing: 1px;
      margin-bottom: 5px;
    }
    
    .info-value {
      font-size: 1rem;
      color: var(--verde-escuro);
      font-weight: var(--peso-medium);
    }
    
    .user-actions {
      display: flex;
      gap: 15px;
      margin-top: 20px;
      flex-wrap: wrap;
    }
  </style>
</head>
<body x-data="userDashboard()" x-init="init()">
  
  <!-- Navbar Simples -->
  <nav class="navbar">
    <div class="navbar-container">
      <div class="navbar-logo">
        <img src="assets/images/logo.svg" alt="Logo IPV">
        <span class="navbar-logo-texto">IPV</span>
      </div>
      
      <div style="display: flex; align-items: center; gap: 15px;">
        <a href="index.html" class="botao botao-outline">Ver Site</a>
        <button class="botao botao-primario" @click="logout()">
          <span class="material-icons">logout</span>
          Sair
        </button>
      </div>
    </div>
  </nav>
  
  <!-- Header -->
  <div class="dashboard-header">
    <div class="container">
      <div class="user-welcome">
        <img :src="usuario?.avatar" :alt="usuario?.nome" class="user-avatar-large">
        <div class="welcome-text">
          <h1>Bem-vindo, <span x-text="usuario?.nome"></span>!</h1>
          <p x-text="'Tipo de acesso: ' + usuario?.tipo"></p>
        </div>
      </div>
      
      <div class="dashboard-actions">
        <a href="index.html#devocionais" class="action-btn">
          <span class="material-icons">menu_book</span>
          Devocionais
        </a>
        <a href="index.html#videos" class="action-btn">
          <span class="material-icons">video_library</span>
          Cultos Online
        </a>
        <a href="index.html#programacao" class="action-btn">
          <span class="material-icons">event</span>
          Programa√ß√£o
        </a>
      </div>
    </div>
  </div>
  
  <!-- Conte√∫do -->
  <section class="secao">
    <div class="container">
      
      <!-- Acesso R√°pido -->
      <h2 class="secao-titulo">Acesso R√°pido</h2>
      <div class="quick-access">
        
        <div class="access-card" @click="window.location.href = 'index.html#devocionais'">
          <div class="access-icon devocionais">
            <span class="material-icons">auto_stories</span>
          </div>
          <h3>Devocionais</h3>
          <p>Vers√≠culo, Salmo e Prov√©rbio do Dia</p>
        </div>
        
        <div class="access-card" @click="window.location.href = 'index.html#videos'">
          <div class="access-icon videos">
            <span class="material-icons">play_circle</span>
          </div>
          <h3>Cultos Online</h3>
          <p>Assista aos cultos e prega√ß√µes</p>
        </div>
        
        <div class="access-card" @click="window.location.href = 'index.html#programacao'">
          <div class="access-icon programacao">
            <span class="material-icons">calendar_today</span>
          </div>
          <h3>Programa√ß√£o</h3>
          <p>Eventos e hor√°rios dos cultos</p>
        </div>
        
        <div class="access-card" @click="mostrarPerfil = !mostrarPerfil">
          <div class="access-icon perfil">
            <span class="material-icons">person</span>
          </div>
          <h3>Meu Perfil</h3>
          <p>Informa√ß√µes pessoais</p>
        </div>
        
      </div>
      
      <!-- Informa√ß√µes do Usu√°rio -->
      <div x-show="mostrarPerfil" x-transition class="user-info-section">
        <h3 style="margin-bottom: 20px; color: var(--verde-escuro);">
          <span class="material-icons" style="vertical-align: middle; margin-right: 10px;">account_circle</span>
          Meus Dados
        </h3>
        
        <div class="info-grid">
          <div class="info-item">
            <div class="info-label">Nome Completo</div>
            <div class="info-value" x-text="usuario?.nome + ' ' + usuario?.sobrenome"></div>
          </div>
          
          <div class="info-item">
            <div class="info-label">E-mail</div>
            <div class="info-value" x-text="usuario?.email"></div>
          </div>
          
          <div class="info-item">
            <div class="info-label">Telefone</div>
            <div class="info-value" x-text="usuario?.telefone"></div>
          </div>
          
          <div class="info-item">
            <div class="info-label">Tipo de Acesso</div>
            <div class="info-value" x-text="usuario?.tipo"></div>
          </div>
          
          <div class="info-item">
            <div class="info-label">Status</div>
            <div class="info-value" x-text="usuario?.status"></div>
          </div>
          
          <div class="info-item">
            <div class="info-label">Membro desde</div>
            <div class="info-value" x-text="formatarData(usuario?.dataCriacao)"></div>
          </div>
        </div>
        
        <div class="user-actions">
          <button class="botao botao-outline" disabled>
            <span class="material-icons">edit</span>
            Editar Perfil
          </button>
          <button class="botao botao-outline" disabled>
            <span class="material-icons">lock</span>
            Alterar Senha
          </button>
          <button class="botao botao-outline" disabled>
            <span class="material-icons">notifications</span>
            Configura√ß√µes
          </button>
        </div>
        
        <p style="margin-top: 15px; font-size: 0.85rem; color: var(--cinza-medio);">
          <em>Nota: Funcionalidades de edi√ß√£o ser√£o implementadas com a integra√ß√£o do Supabase.</em>
        </p>
      </div>
      
      <!-- Informa√ß√µes Adicionais -->
      <div class="card" style="text-align: center; margin-top: 30px;">
        <h3 style="color: var(--verde-escuro); margin-bottom: 15px;">
          <span class="material-icons" style="vertical-align: middle; margin-right: 10px;">info</span>
          Sistema em Desenvolvimento
        </h3>
        <p>Esta √°rea de membros est√° sendo desenvolvida. Em breve teremos:</p>
        <ul style="text-align: left; max-width: 500px; margin: 20px auto;">
          <li>Edi√ß√£o de perfil completa</li>
          <li>Hist√≥rico de participa√ß√£o</li>
          <li>Contribui√ß√µes e dizimos</li>
          <li>Agenda pessoal de eventos</li>
          <li>Comunica√ß√£o direta com lideran√ßa</li>
          <li>Materiais exclusivos para membros</li>
        </ul>
        <p style="margin-top: 20px;">
          <strong>Em caso de d√∫vidas:</strong> Entre em contato atrav√©s do 
          <a href="index.html#contato" style="color: var(--verde-medio);">formul√°rio de contato</a>.
        </p>
      </div>
      
    </div>
  </section>
  
  <!-- Scripts -->
  <script src="js/auth.js"></script>
  
  <script>
    function userDashboard() {
      return {
        usuario: null,
        mostrarPerfil: false,
        
        init() {
          // Verificar autentica√ß√£o
          if (!auth.protegerRota()) {
            return;
          }
          
          this.usuario = auth.usuario;
          console.log('üë§ Dashboard carregado para:', this.usuario.nome);
        },
        
        logout() {
          auth.logout();
        },
        
        formatarData(dataString) {
          if (!dataString) return 'N√£o informado';
          
          try {
            const data = new Date(dataString);
            return data.toLocaleDateString('pt-BR', {
              day: '2-digit',
              month: '2-digit',
              year: 'numeric'
            });
          } catch (erro) {
            return 'Data inv√°lida';
          }
        }
      };
    }
  </script>
  
</body>
</html>