<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta name="description" content="Painel Administrativo - Igreja Presbiteriana Vida">
  <title>Admin | IPV - Igreja Presbiteriana Vida</title>
  
  <!-- Favicons e √çcones -->
  <link rel="icon" type="image/png" sizes="32x32" href="../assets/icons/ipvida.png">
  <link rel="icon" type="image/png" sizes="16x16" href="../assets/icons/ipvida.png">
  <link rel="apple-touch-icon" href="../assets/icons/ipvida.png">
  
  <!-- CSS -->
  <link rel="stylesheet" href="../css/globais.css">
  <link rel="stylesheet" href="../css/admin.css">
  <link rel="stylesheet" href="../css/admin-mobile.css">
  <link rel="stylesheet" href="../css/admin-modals.css">
  <link rel="stylesheet" href="../css/admin-tables.css">
  <link rel="stylesheet" href="../css/ux-ui-fixes.css">
  
  <!-- Alpine.js -->
  <script defer src="https://cdn.jsdelivr.net/npm/@alpinejs/collapse@3.x.x/dist/cdn.min.js"></script>
  <script defer src="https://cdn.jsdelivr.net/npm/alpinejs@3.x.x/dist/cdn.min.js"></script>
  
  <!-- Material Icons -->
  <link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">
  
  <style>
    /* ==================== MODAIS CENTRALIZADOS ==================== */
    /* Garantir que todos os modais fiquem centralizados apenas quando abertos */
    [x-show*="modalAberto"][x-cloak] {
      display: none !important;
    }
    
    .admin-layout {
      display: flex;
      min-height: 100vh;
      background: var(--cinza-muito-claro);
    }
    
    /* ==================== SIDEBAR ==================== */
    .sidebar {
      width: 280px;
      background: linear-gradient(180deg, var(--verde-escuro) 0%, var(--verde-medio) 100%);
      color: var(--branco);
      padding: 0;
      position: fixed;
      height: 100vh;
      z-index: 1000;
      transform: translateX(-100%);
      transition: transform 0.3s ease;
      display: flex;
      flex-direction: column;
    }
    
    .sidebar.aberta {
      transform: translateX(0);
    }
    
    .sidebar-header {
      padding: 25px 20px;
      border-bottom: 1px solid rgba(255,255,255,0.1);
      text-align: center;
      flex-shrink: 0;
    }
    
    .sidebar-user-avatar {
      width: 70px;
      height: 70px;
      border-radius: 50%;
      margin: 0 auto 12px;
      border: 3px solid var(--branco);
      object-fit: cover;
      box-shadow: 0 3px 10px rgba(0,0,0,0.2);
    }
    
    .sidebar-user-name {
      font-size: 1.1rem;
      font-weight: var(--peso-bold);
      margin: 0 0 5px 0;
    }
    
    .sidebar-logo {
      width: 60px;
      height: 60px;
      background: var(--branco);
      border-radius: 50%;
      display: flex;
      align-items: center;
      justify-content: center;
      margin: 0 auto 15px;
      font-size: 1.5rem;
      color: var(--verde-escuro);
    }
    
    .sidebar-title {
      font-size: 1.2rem;
      font-weight: var(--peso-bold);
      margin: 0;
    }
    
    .sidebar-subtitle {
      font-size: 0.85rem;
      opacity: 0.8;
      margin: 5px 0 0 0;
    }
    
    .sidebar-nav {
      padding: 20px 0;
      flex: 1;
      overflow-y: auto;
      overflow-x: hidden;
    }
    
    /* Estilizar scrollbar da navega√ß√£o */
    .sidebar-nav::-webkit-scrollbar {
      width: 6px;
    }
    
    .sidebar-nav::-webkit-scrollbar-track {
      background: rgba(255,255,255,0.1);
    }
    
    .sidebar-nav::-webkit-scrollbar-thumb {
      background: rgba(255,255,255,0.3);
      border-radius: 3px;
    }
    
    .sidebar-nav::-webkit-scrollbar-thumb:hover {
      background: rgba(255,255,255,0.5);
    }
    
    .nav-item {
      margin: 5px 0;
    }
    
    .nav-link {
      display: flex;
      align-items: center;
      padding: 15px 25px;
      color: var(--branco);
      text-decoration: none;
      transition: var(--transicao-padrao);
      border-left: 3px solid transparent;
    }
    
    .nav-link:hover,
    .nav-link.ativo {
      background: rgba(255,255,255,0.1);
      border-left-color: var(--dourado);
    }
    
    .nav-link .material-icons {
      margin-right: 15px;
      font-size: 20px;
    }
    
    .sidebar-footer {
      padding: 20px;
      border-top: 1px solid rgba(255,255,255,0.1);
      flex-shrink: 0;
      background: linear-gradient(180deg, transparent 0%, rgba(0,0,0,0.1) 100%);
    }
    
    .btn-logout {
      width: 100%;
      background: rgba(255,255,255,0.1);
      border: 1px solid rgba(255,255,255,0.2);
      color: var(--branco);
      padding: 12px;
      border-radius: 8px;
      cursor: pointer;
      transition: var(--transicao-padrao);
      display: flex;
      align-items: center;
      justify-content: center;
      gap: 8px;
      font-weight: var(--peso-medium);
    }
    
    .btn-logout:hover {
      background: rgba(255,255,255,0.2);
      transform: translateY(-2px);
    }
    
    /* ==================== MAIN CONTENT ==================== */
    .main-content {
      flex: 1;
      margin-left: 0;
      transition: margin-left 0.3s ease;
    }
    
    .main-content.sidebar-aberta {
      margin-left: 280px;
    }
    
    .topbar {
      background: var(--branco);
      padding: 15px 25px;
      box-shadow: var(--sombra-suave);
      display: flex;
      justify-content: space-between;
      align-items: center;
      position: sticky;
      top: 0;
      z-index: 100;
    }
    
    .topbar-left {
      display: flex;
      align-items: center;
      gap: 15px;
    }
    
    .btn-toggle-sidebar {
      background: var(--cinza-muito-claro);
      border: none;
      width: 40px;
      height: 40px;
      border-radius: 8px;
      cursor: pointer;
      display: flex;
      align-items: center;
      justify-content: center;
      transition: var(--transicao-padrao);
    }
    
    .btn-toggle-sidebar:hover {
      background: var(--cinza-leve);
    }
    
    .topbar-title h1 {
      margin: 0;
      font-size: 1.5rem;
      color: var(--verde-escuro);
    }
    
    .topbar-right {
      display: flex;
      align-items: center;
      gap: 15px;
    }
    
    .admin-content {
      padding: 30px;
    }
    
    /* ==================== DASHBOARD CARDS ==================== */
    .dashboard-grid {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
      gap: 25px;
      margin-bottom: 30px;
    }
    
    .dashboard-card {
      background: var(--branco);
      border-radius: 15px;
      padding: 25px;
      box-shadow: var(--sombra-suave);
      transition: var(--transicao-padrao);
      cursor: pointer;
      border: 2px solid transparent;
    }
    
    .dashboard-card:hover {
      transform: translateY(-5px);
      box-shadow: var(--sombra-media);
      border-color: var(--verde-medio);
    }
    
    .card-header {
      display: flex;
      align-items: center;
      margin-bottom: 15px;
    }
    
    .card-icon {
      width: 50px;
      height: 50px;
      border-radius: 12px;
      display: flex;
      align-items: center;
      justify-content: center;
      margin-right: 15px;
      font-size: 24px;
      color: var(--branco);
    }
    
    .card-icon.usuarios { background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); }
    .card-icon.devocionais { background: linear-gradient(135deg, #f093fb 0%, #f5576c 100%); }
    .card-icon.videos { background: linear-gradient(135deg, #4facfe 0%, #00f2fe 100%); }
    .card-icon.programacao { background: linear-gradient(135deg, #43e97b 0%, #38f9d7 100%); }
    .card-icon.visitantes { background: linear-gradient(135deg, #fa709a 0%, #fee140 100%); }
    .card-icon.configuracoes { background: linear-gradient(135deg, #a8edea 0%, #fed6e3 100%); }
    
    .card-info h3 {
      margin: 0 0 5px 0;
      font-size: 1.1rem;
      color: var(--verde-escuro);
    }
    
    .card-info p {
      margin: 0;
      color: var(--cinza-medio);
      font-size: 0.9rem;
    }
    
    .card-stats {
      display: flex;
      justify-content: space-between;
      align-items: center;
      margin-top: 15px;
      padding-top: 15px;
      border-top: 1px solid var(--cinza-leve);
    }
    
    .stat-number {
      font-size: 1.5rem;
      font-weight: var(--peso-bold);
      color: var(--verde-escuro);
    }
    
    .stat-label {
      font-size: 0.8rem;
      color: var(--cinza-medio);
    }
    
    /* ==================== RESPONSIVE ==================== */
    @media (max-width: 768px) {
      .sidebar {
        width: 100%;
        max-width: 280px;
      }
      
      .sidebar-header {
        padding: 20px 15px;
      }
      
      .sidebar-user-avatar {
        width: 60px;
        height: 60px;
      }
      
      .sidebar-user-name {
        font-size: 1rem;
      }
      
      .main-content.sidebar-aberta {
        margin-left: 0;
      }
      
      .admin-content {
        padding: 20px 15px;
      }
      
      .dashboard-grid {
        grid-template-columns: 1fr;
        gap: 20px;
      }
    }
    
    @media (max-height: 600px) {
      .sidebar-header {
        padding: 15px;
      }
      
      .sidebar-user-avatar {
        width: 50px;
        height: 50px;
        margin-bottom: 8px;
      }
      
      .sidebar-user-name {
        font-size: 0.95rem;
        margin-bottom: 3px;
      }
      
      .sidebar-subtitle {
        font-size: 0.75rem;
      }
      
      .sidebar-nav {
        padding: 10px 0;
      }
      
      .nav-link {
        padding: 12px 20px;
      }
      
      .sidebar-footer {
        padding: 15px;
      }
    }
  </style>
</head>
<body x-data="adminPanel()" x-init="init()">
  
  <div class="admin-layout">
    
    <!-- ==================== SIDEBAR ==================== -->
    <aside class="sidebar" :class="{ 'aberta': sidebarAberta }">
      
      <!-- Header -->
      <div class="sidebar-header">
        <img :src="usuario?.avatar" :alt="usuario?.nome" class="sidebar-user-avatar" x-show="usuario">
        <h2 class="sidebar-user-name" x-text="usuario?.nome + ' ' + usuario?.sobrenome" x-show="usuario" style="color: white;"></h2>
        <p class="sidebar-subtitle" x-text="usuario?.tipo === 'administracao' ? 'Administrador' : usuario?.tipo" style="color: white;"></p>
      </div>
      
      <!-- Navega√ß√£o -->
      <nav class="sidebar-nav">
        <div class="nav-item">
          <a href="#dashboard" class="nav-link ativo" @click="mudarSecao('dashboard')">
            <span class="material-icons">dashboard</span>
            Dashboard
          </a>
        </div>
        
        <div class="nav-item">
          <a href="perfil.html" class="nav-link">
            <span class="material-icons">account_circle</span>
            Meu Perfil
          </a>
        </div>
        
        <!-- Divisor -->
        <div style="height: 1px; background: rgba(255,255,255,0.1); margin: 15px 0;"></div>
        
        <!-- Pessoas -->
        <div style="padding: 10px 25px; font-size: 0.75rem; text-transform: uppercase; letter-spacing: 1px; opacity: 0.7; color: var(--branco);">
          Pessoas
        </div>
        
        <div class="nav-item">
          <a href="#usuarios" class="nav-link" @click="mudarSecao('usuarios')">
            <span class="material-icons">people</span>
            Usu√°rios
          </a>
        </div>
        
        <div class="nav-item">
          <a href="#visitantes" class="nav-link" @click="mudarSecao('visitantes')">
            <span class="material-icons">person_add</span>
            Visitantes
          </a>
        </div>
        
        <!-- Divisor -->
        <div style="height: 1px; background: rgba(255,255,255,0.1); margin: 15px 0;"></div>
        
        <!-- Conte√∫do -->
        <div style="padding: 10px 25px; font-size: 0.75rem; text-transform: uppercase; letter-spacing: 1px; opacity: 0.7; color: var(--branco);">
          Conte√∫do
        </div>
        
        <div class="nav-item">
          <a href="#devocionais" class="nav-link" @click="mudarSecao('devocionais')">
            <span class="material-icons">menu_book</span>
            Devocionais
          </a>
        </div>
        
        <div class="nav-item">
          <a href="#videos" class="nav-link" @click="mudarSecao('videos')">
            <span class="material-icons">video_library</span>
            V√≠deos
          </a>
        </div>
        
        <div class="nav-item">
          <a href="#programacao" class="nav-link" @click="mudarSecao('programacao')">
            <span class="material-icons">event</span>
            Programa√ß√£o
          </a>
        </div>
        
        <div class="nav-item">
          <a href="#eventos" class="nav-link" @click="mudarSecao('eventos')">
            <span class="material-icons">calendar_today</span>
            Eventos
          </a>
        </div>
        
        <!-- Divisor -->
        <div style="height: 1px; background: rgba(255,255,255,0.1); margin: 15px 0;"></div>
        
        <!-- Catec√∫menos -->
        <div style="padding: 10px 25px; font-size: 0.75rem; text-transform: uppercase; letter-spacing: 1px; opacity: 0.7; color: var(--branco);">
          Catec√∫menos
        </div>
        
        <div class="nav-item">
          <a href="#catecumenos" class="nav-link" @click="mudarSecao('catecumenos')">
            <span class="material-icons">school</span>
            Inscri√ß√µes
          </a>
        </div>
        
        <div class="nav-item">
          <a href="#turmas-catecumenos" class="nav-link" @click="mudarSecao('turmas-catecumenos')">
            <span class="material-icons">groups</span>
            Turmas
          </a>
        </div>
        
        <!-- Divisor -->
        <div style="height: 1px; background: rgba(255,255,255,0.1); margin: 15px 0;"></div>
        
        <!-- Configura√ß√µes -->
        
        <div class="nav-item">
          <a href="#dados-igreja" class="nav-link" @click="mudarSecao('dados-igreja')">
            <span class="material-icons">church</span>
            Dados da Igreja
          </a>
        </div>
        
        <div class="nav-item">
          <a href="#redes-sociais" class="nav-link" @click="mudarSecao('redes-sociais')">
            <span class="material-icons">share</span>
            Redes Sociais
          </a>
        </div>
      </nav>
      
      <!-- Footer -->
      <div class="sidebar-footer">
        <button class="btn-logout" @click="logout()">
          <span class="material-icons">logout</span>
          Sair
        </button>
      </div>
      
    </aside>
    
    <!-- ==================== MAIN CONTENT ==================== -->
    <main class="main-content" :class="{ 'sidebar-aberta': sidebarAberta }">
      
      <!-- Topbar -->
      <div class="topbar">
        <div class="topbar-left">
          <button class="btn-toggle-sidebar" @click="toggleSidebar()">
            <span class="material-icons">menu</span>
          </button>
          <div class="topbar-title">
            <h1 x-text="tituloPagina"></h1>
          </div>
        </div>
        
        <div class="topbar-right">
          <a href="#" class="botao botao-outline" target="_blank" id="link-ver-site">
            <span class="material-icons">open_in_new</span>
            Ver Site
          </a>
        </div>
      </div>
      
      <!-- Conte√∫do -->
      <div class="admin-content">
        
        <!-- Dashboard -->
        <div x-show="secaoAtiva === 'dashboard'" x-transition>
          <div class="dashboard-grid">
            
            <div class="dashboard-card" @click="mudarSecao('usuarios')">
              <div class="card-header">
                <div class="card-icon usuarios">
                  <span class="material-icons">people</span>
                </div>
                <div class="card-info">
                  <h3>Usu√°rios</h3>
                  <p>Gerenciar usu√°rios do sistema</p>
                </div>
              </div>
              <div class="card-stats">
                <div>
                  <div class="stat-number" x-text="stats.usuarios"></div>
                  <div class="stat-label">Total</div>
                </div>
                <span class="material-icons" style="color: var(--cinza-leve); font-size: 24px;">arrow_forward</span>
              </div>
            </div>
            
            <div class="dashboard-card" @click="mudarSecao('devocionais')">
              <div class="card-header">
                <div class="card-icon devocionais">
                  <span class="material-icons">menu_book</span>
                </div>
                <div class="card-info">
                  <h3>Devocionais</h3>
                  <p>Gerenciar conte√∫do devocional</p>
                </div>
              </div>
              <div class="card-stats">
                <div>
                  <div class="stat-number" x-text="stats.devocionais"></div>
                  <div class="stat-label">Itens</div>
                </div>
                <span class="material-icons" style="color: var(--cinza-leve); font-size: 24px;">arrow_forward</span>
              </div>
            </div>
            
            <div class="dashboard-card" @click="mudarSecao('videos')">
              <div class="card-header">
                <div class="card-icon videos">
                  <span class="material-icons">video_library</span>
                </div>
                <div class="card-info">
                  <h3>V√≠deos</h3>
                  <p>Gerenciar v√≠deos e cultos</p>
                </div>
              </div>
              <div class="card-stats">
                <div>
                  <div class="stat-number" x-text="stats.videos"></div>
                  <div class="stat-label">V√≠deos</div>
                </div>
                <span class="material-icons" style="color: var(--cinza-leve); font-size: 24px;">arrow_forward</span>
              </div>
            </div>
            
            <div class="dashboard-card" @click="mudarSecao('programacao')">
              <div class="card-header">
                <div class="card-icon programacao">
                  <span class="material-icons">event</span>
                </div>
                <div class="card-info">
                  <h3>Programa√ß√£o</h3>
                  <p>Eventos e programa√ß√£o</p>
                </div>
              </div>
              <div class="card-stats">
                <div>
                  <div class="stat-number" x-text="stats.eventos"></div>
                  <div class="stat-label">Eventos</div>
                </div>
                <span class="material-icons" style="color: var(--cinza-leve); font-size: 24px;">arrow_forward</span>
              </div>
            </div>
            
            <div class="dashboard-card" @click="mudarSecao('visitantes')">
              <div class="card-header">
                <div class="card-icon visitantes">
                  <span class="material-icons">person_add</span>
                </div>
                <div class="card-info">
                  <h3>Visitantes</h3>
                  <p>Cadastros de visitantes</p>
                </div>
              </div>
              <div class="card-stats">
                <div>
                  <div class="stat-number" x-text="stats.visitantes"></div>
                  <div class="stat-label">Cadastros</div>
                </div>
                <span class="material-icons" style="color: var(--cinza-leve); font-size: 24px;">arrow_forward</span>
              </div>
            </div>
            
            <div class="dashboard-card" @click="mudarSecao('catecumenos')" style="border-left: 4px solid #9c27b0;">
              <div class="card-header">
                <div class="card-icon" style="background: linear-gradient(135deg, #9c27b0 0%, #7b1fa2 100%);">
                  <span class="material-icons">school</span>
                </div>
                <div class="card-info">
                  <h3>Catec√∫menos</h3>
                  <p>Turmas e inscri√ß√µes</p>
                </div>
              </div>
              <div class="card-stats">
                <div>
                  <div class="stat-number" x-text="stats.turmas || 0"></div>
                  <div class="stat-label">Turmas</div>
                </div>
                <div>
                  <div class="stat-number" x-text="stats.inscricoes || 0"></div>
                  <div class="stat-label">Inscri√ß√µes</div>
                </div>
                <span class="material-icons" style="color: var(--cinza-leve); font-size: 24px;">arrow_forward</span>
              </div>
            </div>
            
          </div>
        </div>
        
        <!-- Se√ß√µes CRUD -->
        
        <!-- Usu√°rios -->
        <div x-show="secaoAtiva === 'usuarios'" x-data="crudUsuarios()" x-init="init()" x-transition>
          <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 30px;">
            <div>
              <h2>Gerenciar Usu√°rios</h2>
              <p style="color: var(--cinza-medio); font-size: 0.9rem; margin-top: 5px;">
                Gerencie os usu√°rios do sistema. Voc√™ pode criar novos usu√°rios ou editar os existentes.
              </p>
            </div>
            <button @click="abrirModal()" class="botao botao-primario">
              <span class="material-icons" style="vertical-align: middle;">add</span>
              Novo Usu√°rio
            </button>
          </div>
          
          <div x-show="carregando" class="text-center" style="padding: 40px;">
            <div class="spinner" style="margin: 0 auto;"></div>
            <p>Carregando usu√°rios...</p>
          </div>
          
          <div x-show="!carregando" class="card">
            <table style="width: 100%; border-collapse: collapse;">
              <thead>
                <tr style="background: var(--cinza-muito-claro); border-bottom: 2px solid var(--cinza-leve);">
                  <th style="padding: 15px; text-align: left;">Nome</th>
                  <th style="padding: 15px; text-align: left;">Email</th>
                  <th style="padding: 15px; text-align: center;">Tipo</th>
                  <th style="padding: 15px; text-align: center;">Status</th>
                  <th style="padding: 15px; text-align: left;">Criado em</th>
                  <th style="padding: 15px; text-align: center;">A√ß√µes</th>
                </tr>
              </thead>
              <tbody>
                <template x-for="usuario in usuarios" :key="usuario.id">
                  <tr style="border-bottom: 1px solid var(--cinza-leve);">
                    <td style="padding: 15px;">
                      <div style="display: flex; align-items: center; gap: 10px;">
                        <img :src="usuario.avatar_url || `https://ui-avatars.com/api/?name=${usuario.nome}&background=1A4731&color=fff&size=40`" 
                             :alt="usuario.nome" 
                             style="width: 40px; height: 40px; border-radius: 50%; object-fit: cover;">
                        <div>
                          <strong x-text="usuario.nome + ' ' + (usuario.sobrenome || '')"></strong>
                        </div>
                      </div>
                    </td>
                    <td style="padding: 15px;" x-text="usuario.email"></td>
                    <td style="padding: 15px; text-align: center;">
                      <select @change="alterarTipo(usuario.id, $event.target.value)" 
                              :value="usuario.tipo"
                              style="padding: 5px 10px; border: 1px solid var(--cinza-leve); border-radius: 5px; cursor: pointer;">
                        <option value="visitante">Visitante</option>
                        <option value="membro">Membro</option>
                        <option value="lideranca">Lideran√ßa</option>
                        <option value="administracao">Administra√ß√£o</option>
                      </select>
                    </td>
                    <td style="padding: 15px; text-align: center;">
                      <select @change="alterarStatus(usuario.id, $event.target.value)" 
                              :value="usuario.status"
                              style="padding: 5px 10px; border: 1px solid var(--cinza-leve); border-radius: 5px; cursor: pointer;">
                        <option value="ativo">Ativo</option>
                        <option value="inativo">Inativo</option>
                        <option value="suspenso">Suspenso</option>
                      </select>
                    </td>
                    <td style="padding: 15px;" x-text="formatarData(usuario.data_criacao)"></td>
                    <td style="padding: 15px; text-align: center;">
                      <button @click="abrirModal(usuario)" class="botao botao-pequeno" style="margin-right: 5px;" title="Editar">
                        <span class="material-icons" style="font-size: 16px;">edit</span>
                      </button>
                      <button @click="deletar(usuario.id)" 
                              class="botao botao-pequeno botao-secundario" 
                              title="Deletar"
                              x-show="usuario.tipo !== 'administracao' || usuarios.filter(u => u.tipo === 'administracao').length > 1">
                        <span class="material-icons" style="font-size: 16px;">delete</span>
                      </button>
                    </td>
                  </tr>
                </template>
                <tr x-show="usuarios.length === 0">
                  <td colspan="6" style="padding: 40px; text-align: center; color: var(--cinza-medio);">
                    Nenhum usu√°rio cadastrado
                  </td>
                </tr>
              </tbody>
            </table>
          </div>
          
          <!-- Modal de Edi√ß√£o/Cria√ß√£o -->
          <div x-show="modalAberto" 
               style="position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: rgba(0,0,0,0.5); z-index: 10000; display: flex; align-items: center; justify-content: center; padding: 20px;" 
               @click.self="fecharModal()">
            <div style="background: white; padding: 30px; border-radius: 15px; max-width: 600px; width: 100%; max-height: 90vh; overflow-y: auto; margin: auto;">
              <h3 x-text="usuarioEditando ? 'Editar Usu√°rio' : 'Novo Usu√°rio'"></h3>
              
              <div style="margin-top: 20px;">
                <label style="display: block; margin-bottom: 5px; font-weight: bold;">Nome *</label>
                <input type="text" x-model="formulario.nome" style="width: 100%; padding: 10px; border: 1px solid var(--cinza-leve); border-radius: 5px;" required>
              </div>
              
              <div style="margin-top: 15px;">
                <label style="display: block; margin-bottom: 5px; font-weight: bold;">Sobrenome</label>
                <input type="text" x-model="formulario.sobrenome" style="width: 100%; padding: 10px; border: 1px solid var(--cinza-leve); border-radius: 5px;">
              </div>
              
              <div style="margin-top: 15px;">
                <label style="display: block; margin-bottom: 5px; font-weight: bold;">Email *</label>
                <input type="email" x-model="formulario.email" style="width: 100%; padding: 10px; border: 1px solid var(--cinza-leve); border-radius: 5px;" required>
              </div>
              
              <div style="margin-top: 15px;">
                <label style="display: block; margin-bottom: 5px; font-weight: bold;">Telefone</label>
                <input type="tel" x-model="formulario.telefone" style="width: 100%; padding: 10px; border: 1px solid var(--cinza-leve); border-radius: 5px;">
              </div>
              
              <div style="margin-top: 15px;">
                <label style="display: block; margin-bottom: 5px; font-weight: bold;">Tipo</label>
                <select x-model="formulario.tipo" style="width: 100%; padding: 10px; border: 1px solid var(--cinza-leve); border-radius: 5px;">
                  <template x-for="tipo in tipos" :key="tipo.valor">
                    <option :value="tipo.valor" x-text="tipo.label"></option>
                  </template>
                </select>
              </div>
              
              <div style="margin-top: 15px;">
                <label style="display: block; margin-bottom: 5px; font-weight: bold;">Status</label>
                <select x-model="formulario.status" style="width: 100%; padding: 10px; border: 1px solid var(--cinza-leve); border-radius: 5px;">
                  <option value="ativo">Ativo</option>
                  <option value="inativo">Inativo</option>
                  <option value="suspenso">Suspenso</option>
                </select>
              </div>
              
              <div style="margin-top: 25px; display: flex; gap: 10px; justify-content: flex-end;">
                <button @click="fecharModal()" class="botao botao-secundario" :disabled="carregando">Cancelar</button>
                <button @click="salvar()" class="botao botao-primario" :disabled="carregando">
                  <span x-show="!carregando">Salvar</span>
                  <span x-show="carregando">Salvando...</span>
                </button>
              </div>
            </div>
          </div>
        </div>
        
        <!-- Devocionais -->
        <div x-show="secaoAtiva === 'devocionais'" x-data="crudDevocionais()" x-init="init()" x-transition>
          <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 30px;">
            <h2>Gerenciar Devocionais</h2>
            <button @click="abrirModal()" class="botao botao-primario">
              <span class="material-icons" style="vertical-align: middle;">add</span>
              Novo Devocional
            </button>
          </div>
          
          <div x-show="carregando" class="text-center" style="padding: 40px;">
            <div class="spinner" style="margin: 0 auto;"></div>
            <p>Carregando...</p>
          </div>
          
          <!-- Listagem Moderna -->
          <div x-show="!carregando" class="crud-table-container">
            <table class="crud-table">
              <thead>
                <tr>
                  <th style="width: 80px;">Imagem</th>
                  <th>T√≠tulo</th>
                  <th style="width: 120px;">Data</th>
                  <th style="width: 100px;">Status</th>
                  <th style="width: 130px;">Visibilidade</th>
                  <th style="width: 200px;">A√ß√µes</th>
                </tr>
              </thead>
              <tbody>
                <template x-for="devocional in devocionais" :key="devocional.id">
                  <tr>
                    <td>
                      <div class="table-thumbnail">
                        <img :src="devocional.imagem || '../assets/images/default-devocional.jpg'" 
                             :alt="devocional.titulo"
                             onerror="this.src='../assets/images/default-devocional.jpg'">
                      </div>
                    </td>
                    <td>
                      <div class="table-title" x-text="devocional.titulo || 'Sem t√≠tulo'"></div>
                    </td>
                    <td x-text="devocional.data_publicacao"></td>
                    <td>
                      <span class="badge" :class="devocional.ativo ? 'badge-success' : 'badge-danger'">
                        <span x-text="devocional.ativo ? 'Ativo' : 'Inativo'"></span>
                      </span>
                    </td>
                    <td>
                      <span x-show="!devocional.nivel_acesso || devocional.nivel_acesso.includes('visitante')" 
                            class="badge badge-public">üåê P√∫blico</span>
                      <span x-show="devocional.nivel_acesso && !devocional.nivel_acesso.includes('visitante') && devocional.nivel_acesso.includes('membro')" 
                            class="badge badge-members">üë• Membros</span>
                      <span x-show="devocional.nivel_acesso && !devocional.nivel_acesso.includes('membro') && devocional.nivel_acesso.includes('lideranca')" 
                            class="badge badge-leadership">üëî Lideran√ßa</span>
                    </td>
                    <td>
                      <div class="table-actions">
                        <button @click="abrirModal(devocional)" class="btn-action btn-edit">
                          <span class="material-icons">edit</span>
                        </button>
                        <button @click="deletar(devocional.id)" class="btn-action btn-delete">
                          <span class="material-icons">delete</span>
                        </button>
                      </div>
                    </td>
                  </tr>
                </template>
              </tbody>
            </table>
            
            <!-- Mobile Cards -->
            <div class="crud-mobile-cards">
              <template x-for="devocional in devocionais" :key="devocional.id">
                <div class="mobile-card">
                  <div class="mobile-card-image">
                    <img :src="devocional.imagem || '../assets/images/default-devocional.jpg'" 
                         :alt="devocional.titulo"
                         onerror="this.src='../assets/images/default-devocional.jpg'">
                    <span class="badge" :class="devocional.ativo ? 'badge-success' : 'badge-danger'" 
                          x-text="devocional.ativo ? 'Ativo' : 'Inativo'"></span>
                  </div>
                  <div class="mobile-card-content">
                    <h4 x-text="devocional.titulo || 'Sem t√≠tulo'"></h4>
                    <div class="mobile-card-meta">
                      <span>üìÖ <span x-text="devocional.data_publicacao"></span></span>
                    </div>
                    <div class="mobile-card-badges">
                      <span x-show="!devocional.nivel_acesso || devocional.nivel_acesso.includes('visitante')" 
                            class="badge badge-public">üåê P√∫blico</span>
                      <span x-show="devocional.nivel_acesso && !devocional.nivel_acesso.includes('visitante') && devocional.nivel_acesso.includes('membro')" 
                            class="badge badge-members">üë• Membros</span>
                      <span x-show="devocional.nivel_acesso && !devocional.nivel_acesso.includes('membro') && devocional.nivel_acesso.includes('lideranca')" 
                            class="badge badge-leadership">üëî Lideran√ßa</span>
                    </div>
                    <div class="mobile-card-actions">
                      <button @click="abrirModal(devocional)" class="btn-action btn-edit">
                        <span class="material-icons">edit</span> Editar
                      </button>
                      <button @click="deletar(devocional.id)" class="btn-action btn-delete">
                        <span class="material-icons">delete</span> Deletar
                      </button>
                    </div>
                  </div>
                </div>
              </template>
            </div>
          </div>
          
          <!-- Modal Devocional Moderno -->
          <div x-show="modalAberto" class="modal-overlay" @click.self="fecharModal()">
            <div class="modal-container">
              <div class="modal-header">
                <h3 x-text="devocionalEditando ? 'Editar Devocional' : 'Novo Devocional'"></h3>
                <button @click="fecharModal()" class="modal-close">
                  <span class="material-icons">close</span>
                </button>
              </div>
              
              <div class="modal-body">
                <div class="form-grid-2">
                  <div class="form-group form-group-full">
                    <label class="form-label">T√≠tulo *</label>
                    <input type="text" x-model="formulario.titulo" class="form-input" placeholder="Digite o t√≠tulo do devocional" required>
                  </div>
                  
                  <div class="form-group form-group-full">
                    <label class="form-label">Texto do Devocional *</label>
                    <textarea x-model="formulario.texto" rows="6" class="form-textarea" placeholder="Digite o texto completo do devocional" required></textarea>
                  </div>
                  
                  <div class="form-group form-group-full">
                    <label class="form-label">
                      <span class="material-icons" style="vertical-align: middle; font-size: 18px;">image</span>
                      Imagem de Capa
                    </label>
                    <div class="image-upload-container">
                      <input type="file" @change="selecionarImagem($event)" accept="image/*" class="form-input" id="file-devocional">
                      <div x-show="previewImagem" class="image-preview">
                        <img :src="previewImagem" alt="Preview">
                        <button type="button" @click="previewImagem = ''; formulario.imagem = ''" class="btn-remove-image">
                          <span class="material-icons">close</span>
                        </button>
                      </div>
                    </div>
                  </div>
                  
                  <div class="form-group">
                    <label class="form-label">Data de Publica√ß√£o</label>
                    <input type="date" x-model="formulario.data_publicacao" class="form-input">
                  </div>
                  
                  <div class="form-group">
                    <label class="form-label">Status</label>
                    <label class="form-checkbox">
                      <input type="checkbox" x-model="formulario.ativo">
                      <span class="checkbox-label">Devocional Ativo</span>
                    </label>
                  </div>
                  
                  <div class="form-group form-group-full">
                    <label class="form-label">
                      <span class="material-icons" style="vertical-align: middle; font-size: 18px;">visibility</span>
                      Quem pode ver?
                    </label>
                    <div class="access-level-chips">
                      <button type="button" 
                        @click="formulario.nivel_acesso = ['visitante', 'membro', 'lideranca', 'administracao']" 
                        class="access-chip"
                        :class="{'active': !formulario.nivel_acesso || formulario.nivel_acesso.includes('visitante')}">
                        üåê Todos (P√∫blico)
                      </button>
                      <button type="button" 
                        @click="formulario.nivel_acesso = ['membro', 'lideranca', 'administracao']" 
                        class="access-chip"
                        :class="{'active': formulario.nivel_acesso && !formulario.nivel_acesso.includes('visitante') && formulario.nivel_acesso.includes('membro')}">
                        üë• Apenas Membros
                      </button>
                      <button type="button" 
                        @click="formulario.nivel_acesso = ['lideranca', 'administracao']" 
                        class="access-chip"
                        :class="{'active': formulario.nivel_acesso && !formulario.nivel_acesso.includes('membro') && formulario.nivel_acesso.includes('lideranca')}">
                        üëî Apenas Lideran√ßa
                      </button>
                    </div>
                    <small class="form-hint">Visitantes n√£o logados s√≥ ver√£o itens marcados como "P√∫blico"</small>
                  </div>
                </div>
              </div>
              
              <div class="modal-footer">
                <button @click="fecharModal()" class="btn-secondary" :disabled="carregando">
                  <span class="material-icons">close</span>
                  Cancelar
                </button>
                <button @click="salvar()" class="btn-primary" :disabled="carregando">
                  <span x-show="!carregando" class="material-icons">save</span>
                  <span x-show="!carregando">Salvar</span>
                  <span x-show="carregando">Salvando...</span>
                </button>
              </div>
            </div>
          </div>
        </div>
        
        <!-- V√≠deos -->
        <div x-show="secaoAtiva === 'videos'" x-data="crudVideos()" x-init="init()" x-transition>
          <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 30px;">
            <h2>Gerenciar V√≠deos</h2>
            <button @click="abrirModal()" class="botao botao-primario">
              <span class="material-icons" style="vertical-align: middle;">add</span>
              Novo V√≠deo
            </button>
          </div>
          
          <div x-show="carregando" class="text-center" style="padding: 40px;">
            <div class="spinner" style="margin: 0 auto;"></div>
            <p>Carregando...</p>
          </div>
          
          <!-- Listagem Moderna -->
          <div x-show="!carregando" class="crud-table-container">
            <table class="crud-table">
              <thead>
                <tr>
                  <th style="width: 120px;">Thumbnail</th>
                  <th>T√≠tulo</th>
                  <th style="width: 120px;">ID</th>
                  <th style="width: 100px;">Destaque</th>
                  <th style="width: 130px;">Visibilidade</th>
                  <th style="width: 200px;">A√ß√µes</th>
                </tr>
              </thead>
              <tbody>
                <template x-for="video in videos" :key="video.id">
                  <tr>
                    <td>
                      <div class="table-thumbnail">
                        <img :src="`https://img.youtube.com/vi/${video.video_id}/mqdefault.jpg`" 
                             :alt="video.titulo">
                      </div>
                    </td>
                    <td>
                      <div class="table-title" x-text="video.titulo"></div>
                    </td>
                    <td x-text="video.video_id"></td>
                    <td>
                      <span x-show="video.destaque" class="badge badge-warning">‚òÖ Destaque</span>
                      <span x-show="!video.destaque" class="badge badge-light">-</span>
                    </td>
                    <td>
                      <span x-show="!video.nivel_acesso || video.nivel_acesso.includes('visitante')" 
                            class="badge badge-public">üåê P√∫blico</span>
                      <span x-show="video.nivel_acesso && !video.nivel_acesso.includes('visitante') && video.nivel_acesso.includes('membro')" 
                            class="badge badge-members">üë• Membros</span>
                      <span x-show="video.nivel_acesso && !video.nivel_acesso.includes('membro') && video.nivel_acesso.includes('lideranca')" 
                            class="badge badge-leadership">üëî Lideran√ßa</span>
                    </td>
                    <td>
                      <div class="table-actions">
                        <button @click="abrirModal(video)" class="btn-action btn-edit">
                          <span class="material-icons">edit</span>
                        </button>
                        <button @click="deletar(video.id)" class="btn-action btn-delete">
                          <span class="material-icons">delete</span>
                        </button>
                      </div>
                    </td>
                  </tr>
                </template>
              </tbody>
            </table>
            
            <!-- Mobile Cards -->
            <div class="crud-mobile-cards">
              <template x-for="video in videos" :key="video.id">
                <div class="mobile-card">
                  <div class="mobile-card-image">
                    <img :src="`https://img.youtube.com/vi/${video.video_id}/mqdefault.jpg`" 
                         :alt="video.titulo">
                    <span x-show="video.destaque" class="badge badge-warning">‚òÖ Destaque</span>
                  </div>
                  <div class="mobile-card-content">
                    <h4 x-text="video.titulo"></h4>
                    <div class="mobile-card-meta">
                      <span>üé¨ <span x-text="video.video_id"></span></span>
                    </div>
                    <div class="mobile-card-badges">
                      <span x-show="!video.nivel_acesso || video.nivel_acesso.includes('visitante')" 
                            class="badge badge-public">üåê P√∫blico</span>
                      <span x-show="video.nivel_acesso && !video.nivel_acesso.includes('visitante') && video.nivel_acesso.includes('membro')" 
                            class="badge badge-members">üë• Membros</span>
                      <span x-show="video.nivel_acesso && !video.nivel_acesso.includes('membro') && video.nivel_acesso.includes('lideranca')" 
                            class="badge badge-leadership">üëî Lideran√ßa</span>
                    </div>
                    <div class="mobile-card-actions">
                      <button @click="abrirModal(video)" class="btn-action btn-edit">
                        <span class="material-icons">edit</span> Editar
                      </button>
                      <button @click="deletar(video.id)" class="btn-action btn-delete">
                        <span class="material-icons">delete</span> Deletar
                      </button>
                    </div>
                  </div>
                </div>
              </template>
            </div>
          </div>
          
          <!-- Modal V√≠deo Moderno -->
          <div x-show="modalAberto" class="modal-overlay" @click.self="fecharModal()">
            <div class="modal-container">
              <div class="modal-header">
                <h3 x-text="videoEditando ? 'Editar V√≠deo' : 'Novo V√≠deo'"></h3>
                <button @click="fecharModal()" class="modal-close">
                  <span class="material-icons">close</span>
                </button>
              </div>
              
              <div class="modal-body">
                <div class="form-grid-2">
                  <div class="form-group form-group-full">
                    <label class="form-label">
                      <span class="material-icons" style="vertical-align: middle; font-size: 18px;">link</span>
                      URL do YouTube *
                    </label>
                    <input type="url" x-model="formulario.url" placeholder="https://www.youtube.com/watch?v=..." class="form-input" required>
                    <button type="button" @click="preencherDoYouTube()" class="btn-secondary" style="margin-top: 8px; width: auto;">
                      <span class="material-icons">cloud_download</span>
                      Buscar Dados do YouTube
                    </button>
                  </div>
                  
                  <div class="form-group">
                    <label class="form-label">ID do V√≠deo *</label>
                    <input type="text" x-model="formulario.video_id" class="form-input" placeholder="Ex: dQw4w9WgXcQ" required>
                  </div>
                  
                  <div class="form-group">
                    <label class="form-label">Ordem de Exibi√ß√£o</label>
                    <input type="number" x-model="formulario.ordem" class="form-input" placeholder="0">
                  </div>
                  
                  <div class="form-group form-group-full">
                    <label class="form-label">T√≠tulo *</label>
                    <input type="text" x-model="formulario.titulo" class="form-input" placeholder="Digite o t√≠tulo do v√≠deo" required>
                  </div>
                  
                  <div class="form-group form-group-full">
                    <label class="form-label">Descri√ß√£o</label>
                    <textarea x-model="formulario.descricao" rows="3" class="form-textarea" placeholder="Digite uma descri√ß√£o breve"></textarea>
                  </div>
                  
                  <div class="form-group">
                    <label class="form-label">Data de Publica√ß√£o</label>
                    <input type="date" x-model="formulario.data_publicacao" class="form-input">
                  </div>
                  
                  <div class="form-group">
                    <label class="form-label">Op√ß√µes</label>
                    <label class="form-checkbox">
                      <input type="checkbox" x-model="formulario.destaque">
                      <span class="checkbox-label">‚≠ê Marcar como destaque</span>
                    </label>
                  </div>
                  
                  <div class="form-group form-group-full">
                    <label class="form-label">
                      <span class="material-icons" style="vertical-align: middle; font-size: 18px;">visibility</span>
                      Quem pode ver?
                    </label>
                    <div class="access-level-chips">
                      <button type="button" 
                        @click="formulario.nivel_acesso = ['visitante', 'membro', 'lideranca', 'administracao']" 
                        class="access-chip"
                        :class="{'active': !formulario.nivel_acesso || formulario.nivel_acesso.includes('visitante')}">
                        üåê Todos (P√∫blico)
                      </button>
                      <button type="button" 
                        @click="formulario.nivel_acesso = ['membro', 'lideranca', 'administracao']" 
                        class="access-chip"
                        :class="{'active': formulario.nivel_acesso && !formulario.nivel_acesso.includes('visitante') && formulario.nivel_acesso.includes('membro')}">
                        üë• Apenas Membros
                      </button>
                      <button type="button" 
                        @click="formulario.nivel_acesso = ['lideranca', 'administracao']" 
                        class="access-chip"
                        :class="{'active': formulario.nivel_acesso && !formulario.nivel_acesso.includes('membro') && formulario.nivel_acesso.includes('lideranca')}">
                        üëî Apenas Lideran√ßa
                      </button>
                    </div>
                    <small class="form-hint">Visitantes n√£o logados s√≥ ver√£o itens marcados como "P√∫blico"</small>
                  </div>
                </div>
              </div>
              
              <div class="modal-footer">
                <button @click="fecharModal()" class="btn-secondary" :disabled="carregando">
                  <span class="material-icons">close</span>
                  Cancelar
                </button>
                <button @click="salvar()" class="btn-primary" :disabled="carregando">
                  <span x-show="!carregando" class="material-icons">save</span>
                  <span x-show="!carregando">Salvar</span>
                  <span x-show="carregando">Salvando...</span>
                </button>
              </div>
            </div>
          </div>
        </div>
        
        <!-- Programa√ß√£o -->
        <div x-show="secaoAtiva === 'programacao'" x-data="crudProgramacao()" x-init="init()" x-transition>
          <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 30px;">
            <h2>Gerenciar Programa√ß√£o</h2>
            <button @click="abrirModal()" class="botao botao-primario">
              <span class="material-icons" style="vertical-align: middle;">add</span>
              Novo Programa
            </button>
          </div>
          
          <div x-show="carregando" class="text-center" style="padding: 40px;">
            <div class="spinner" style="margin: 0 auto;"></div>
            <p>Carregando...</p>
          </div>
          
          <!-- Listagem Moderna -->
          <div x-show="!carregando" class="crud-table-container">
            <table class="crud-table">
              <thead>
                <tr>
                  <th style="width: 80px;">Imagem</th>
                  <th>T√≠tulo</th>
                  <th style="width: 150px;">Data/Hor√°rio</th>
                  <th style="width: 130px;">Visibilidade</th>
                  <th style="width: 100px;">Status</th>
                  <th style="width: 200px;">A√ß√µes</th>
                </tr>
              </thead>
              <tbody>
                <template x-for="programa in programas" :key="programa.id">
                  <tr>
                    <td>
                      <div class="table-thumbnail">
                        <img :src="programa.imagem || '../assets/images/default-programa.jpg'" 
                             :alt="programa.titulo"
                             onerror="this.src='../assets/images/default-programa.jpg'">
                      </div>
                    </td>
                    <td>
                      <div class="table-title" x-text="programa.titulo"></div>
                    </td>
                    <td x-text="`${programa.dia}/${programa.mes}/${programa.ano} ${programa.horario}`"></td>
                    <td>
                      <span x-show="!programa.nivel_acesso || programa.nivel_acesso.includes('visitante')" 
                            class="badge badge-public">üåê P√∫blico</span>
                      <span x-show="programa.nivel_acesso && !programa.nivel_acesso.includes('visitante') && programa.nivel_acesso.includes('membro')" 
                            class="badge badge-members">üë• Membros</span>
                      <span x-show="programa.nivel_acesso && !programa.nivel_acesso.includes('membro') && programa.nivel_acesso.includes('lideranca')" 
                            class="badge badge-leadership">üëî Lideran√ßa</span>
                    </td>
                    <td>
                      <span class="badge" :class="programa.ativo ? 'badge-success' : 'badge-danger'">
                        <span x-text="programa.ativo ? 'Ativo' : 'Inativo'"></span>
                      </span>
                    </td>
                    <td>
                      <div class="table-actions">
                        <button @click="abrirModal(programa)" class="btn-action btn-edit">
                          <span class="material-icons">edit</span>
                        </button>
                        <button @click="deletar(programa.id)" class="btn-action btn-delete">
                          <span class="material-icons">delete</span>
                        </button>
                      </div>
                    </td>
                  </tr>
                </template>
              </tbody>
            </table>
            
            <!-- Mobile Cards -->
            <div class="crud-mobile-cards">
              <template x-for="programa in programas" :key="programa.id">
                <div class="mobile-card">
                  <div class="mobile-card-image">
                    <img :src="programa.imagem || '../assets/images/default-programa.jpg'" 
                         :alt="programa.titulo"
                         onerror="this.src='../assets/images/default-programa.jpg'">
                    <span class="badge" :class="programa.ativo ? 'badge-success' : 'badge-danger'" 
                          x-text="programa.ativo ? 'Ativo' : 'Inativo'"></span>
                  </div>
                  <div class="mobile-card-content">
                    <h4 x-text="programa.titulo"></h4>
                    <div class="mobile-card-meta">
                      <span>üìÖ <span x-text="`${programa.dia}/${programa.mes}/${programa.ano}`"></span></span>
                      <span>üïê <span x-text="programa.horario"></span></span>
                    </div>
                    <div class="mobile-card-badges">
                      <span x-show="!programa.nivel_acesso || programa.nivel_acesso.includes('visitante')" 
                            class="badge badge-public">üåê P√∫blico</span>
                      <span x-show="programa.nivel_acesso && !programa.nivel_acesso.includes('visitante') && programa.nivel_acesso.includes('membro')" 
                            class="badge badge-members">üë• Membros</span>
                      <span x-show="programa.nivel_acesso && !programa.nivel_acesso.includes('membro') && programa.nivel_acesso.includes('lideranca')" 
                            class="badge badge-leadership">üëî Lideran√ßa</span>
                    </div>
                    <div class="mobile-card-actions">
                      <button @click="abrirModal(programa)" class="btn-action btn-edit">
                        <span class="material-icons">edit</span> Editar
                      </button>
                      <button @click="deletar(programa.id)" class="btn-action btn-delete">
                        <span class="material-icons">delete</span> Deletar
                      </button>
                    </div>
                  </div>
                </div>
              </template>
            </div>
          </div>
          
          <!-- Modal Programa√ß√£o PROFISSIONAL -->
          <div x-show="modalAberto" class="modal-crud-overlay" @click.self="fecharModal()">
            <div class="modal-crud-container">
              <div class="modal-crud-header">
                <h3 x-text="programaEditando ? 'Editar Programa' : 'Novo Programa'"></h3>
                <button @click="fecharModal()" class="modal-close">
                  <span class="material-icons">close</span>
                </button>
              </div>
              
              <div class="modal-crud-body">
                <div class="form-grid-2">
                  <div class="form-group form-group-full">
                    <label class="form-label">
                      <span class="material-icons">title</span>
                      T√≠tulo do Programa *
                    </label>
                    <input type="text" x-model="formulario.titulo" class="form-input" placeholder="Ex: Culto de Domingo" required>
                  </div>
                  
                  <div class="form-group form-group-full">
                    <label class="form-label">
                      <span class="material-icons">description</span>
                      Descri√ß√£o <small style="font-weight: normal; color: #64748b;">(m√°x. 200 caracteres)</small>
                    </label>
                    <textarea x-model="formulario.descricao" maxlength="200" rows="3" class="form-textarea" placeholder="Breve descri√ß√£o do programa..."></textarea>
                    <small class="form-hint" x-text="(formulario.descricao?.length || 0) + '/200'"></small>
                  </div>
                  
                  <div class="form-group">
                    <label class="form-label">
                      <span class="material-icons">event</span>
                      Data *
                    </label>
                    <input type="date" x-model="formulario.data_completa" class="form-input" 
                           @change="
                             if(formulario.data_completa) {
                               const d = new Date(formulario.data_completa + 'T00:00:00');
                               formulario.dia = d.getDate();
                               formulario.mes = ['jan', 'fev', 'mar', 'abr', 'mai', 'jun', 'jul', 'ago', 'set', 'out', 'nov', 'dez'][d.getMonth()];
                               formulario.ano = d.getFullYear();
                             }
                           " required>
                  </div>
                  
                  <div class="form-group">
                    <label class="form-label">
                      <span class="material-icons">schedule</span>
                      Hor√°rio *
                    </label>
                    <input type="time" x-model="formulario.horario" class="form-input" required>
                  </div>
                  
                  <div class="form-group form-group-full">
                    <label class="form-label">
                      <span class="material-icons">location_on</span>
                      Local *
                    </label>
                    <input type="text" x-model="formulario.local" class="form-input" placeholder="Ex: Templo Principal" required>
                  </div>
                  
                  <div class="form-group form-group-full">
                    <label class="form-label">
                      <span class="material-icons">image</span>
                      Imagem de Capa
                    </label>
                    <input type="file" @change="selecionarImagem($event)" accept="image/*" class="form-input">
                    <div x-show="previewImagem" class="image-preview mt-2">
                      <img :src="previewImagem" style="max-width: 200px; border-radius: 8px;">
                    </div>
                  </div>
                  
                  <div class="form-group">
                    <label class="form-checkbox">
                      <input type="checkbox" x-model="formulario.ativo">
                      <span class="checkbox-label">Programa Ativo</span>
                    </label>
                  </div>
                  
                  <div class="form-group form-group-full">
                    <label class="form-label">
                      <span class="material-icons">visibility</span>
                      Quem pode ver?
                    </label>
                    <div class="access-level-chips">
                      <button type="button" 
                        @click="formulario.nivel_acesso = ['visitante', 'membro', 'lideranca', 'administracao']" 
                        class="access-chip"
                        :class="{'active': !formulario.nivel_acesso || formulario.nivel_acesso.includes('visitante')}">
                        üåê Todos (P√∫blico)
                      </button>
                      <button type="button" 
                        @click="formulario.nivel_acesso = ['membro', 'lideranca', 'administracao']" 
                        class="access-chip"
                        :class="{'active': formulario.nivel_acesso && !formulario.nivel_acesso.includes('visitante') && formulario.nivel_acesso.includes('membro')}">
                        üë• Apenas Membros
                      </button>
                      <button type="button" 
                        @click="formulario.nivel_acesso = ['lideranca', 'administracao']" 
                        class="access-chip"
                        :class="{'active': formulario.nivel_acesso && !formulario.nivel_acesso.includes('membro') && formulario.nivel_acesso.includes('lideranca')}">
                        üëî Lideran√ßa
                      </button>
                    </div>
                    <small style="display: block; margin-top: 8px; color: #666;">Visitantes n√£o logados s√≥ ver√£o itens marcados como "P√∫blico"</small>
                  </div>
                </div>
              </div>
              
              <div class="modal-crud-footer">
                <button @click="fecharModal()" class="btn-secondary" :disabled="carregando">
                  <span class="material-icons">close</span>
                  Cancelar
                </button>
                <button @click="salvar()" class="btn-primary" :disabled="carregando">
                  <span x-show="!carregando" class="material-icons">save</span>
                  <span x-show="!carregando">Salvar</span>
                  <span x-show="carregando">Salvando...</span>
                </button>
              </div>
            </div>
          </div>
        </div>
        
        <!-- Visitantes -->
        <div x-show="secaoAtiva === 'visitantes'" x-data="crudVisitantes()" x-init="init()" x-transition>
          <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 30px;">
            <h2>Gerenciar Visitantes</h2>
            <button @click="abrirModal()" class="botao botao-primario">
              <span class="material-icons" style="vertical-align: middle;">add</span>
              Novo Visitante
            </button>
          </div>
          
          <div x-show="carregando" class="text-center" style="padding: 40px;">
            <div class="spinner" style="margin: 0 auto;"></div>
            <p>Carregando...</p>
          </div>
          
          <!-- Listagem Moderna Visitantes -->
          <div x-show="!carregando" class="crud-table-container">
            <table class="crud-table">
              <thead>
                <tr>
                  <th style="width: 60px;">Avatar</th>
                  <th>Nome</th>
                  <th>Contato</th>
                  <th style="width: 140px;">Data Visita</th>
                  <th style="width: 120px;">Status</th>
                  <th style="width: 140px;">A√ß√µes</th>
                </tr>
              </thead>
              <tbody>
                <template x-for="visitante in visitantes" :key="visitante.id">
                  <tr>
                    <td>
                      <div class="table-thumbnail">
                        <img :src="visitante.avatar || '../assets/images/default-user.jpg'" alt="Visitante" onerror="this.src='../assets/images/default-user.jpg'">
                      </div>
                    </td>
                    <td>
                      <div class="table-title" x-text="visitante.nome || 'Visitante'"></div>
                      <div class="table-subtitle" x-text="visitante.email || visitante.telefone || 'Sem contato'"></div>
                    </td>
                    <td x-text="visitante.email || visitante.telefone || '-'"></td>
                    <td x-text="formatarData(visitante.data_visita)"></td>
                    <td>
                      <span class="badge" :class="visitante.status === 'confirmado' ? 'badge-success' : (visitante.status === 'cancelado' ? 'badge-danger' : 'badge-info')" x-text="visitante.status || '-'"></span>
                    </td>
                    <td>
                      <div class="table-actions">
                        <button @click="abrirModal(visitante)" class="btn-action btn-edit"><span class="material-icons">edit</span></button>
                        <button @click="deletar(visitante.id)" class="btn-action btn-delete"><span class="material-icons">delete</span></button>
                      </div>
                    </td>
                  </tr>
                </template>
              </tbody>
            </table>

            <!-- Mobile cards -->
            <div class="crud-mobile-cards">
              <template x-for="visitante in visitantes" :key="visitante.id">
                <div class="mobile-card">
                  <div class="mobile-card-image">
                    <img :src="visitante.avatar || '../assets/images/default-user.jpg'" alt="Visitante" onerror="this.src='../assets/images/default-user.jpg'">
                  </div>
                  <div class="mobile-card-content">
                    <h4 x-text="visitante.nome || 'Visitante'"></h4>
                    <div class="mobile-card-meta">
                      <span>üìß <span x-text="visitante.email || '-'"></span></span>
                      <span>üìû <span x-text="visitante.telefone || '-'"></span></span>
                    </div>
                    <div class="mobile-card-meta">
                      <span>üìÖ <span x-text="formatarData(visitante.data_visita)"></span></span>
                      <span class="badge" :class="visitante.status === 'confirmado' ? 'badge-success' : (visitante.status === 'cancelado' ? 'badge-danger' : 'badge-info')" x-text="visitante.status || '-'"></span>
                    </div>
                    <div class="mobile-card-actions">
                      <button @click="abrirModal(visitante)" class="btn-action btn-edit"><span class="material-icons">edit</span> Editar</button>
                      <button @click="deletar(visitante.id)" class="btn-action btn-delete"><span class="material-icons">delete</span> Deletar</button>
                    </div>
                  </div>
                </div>
              </template>
            </div>
          </div>
          
          <!-- Modal Visitante MODERNO -->
          <div x-show="modalAberto" class="modal-crud-overlay" @click.self="fecharModal()">
            <div class="modal-crud-container">
              <div class="modal-crud-header">
                <h3 x-text="visitanteEditando ? 'Editar Visitante' : 'Novo Visitante'"></h3>
                <button @click="fecharModal()" class="modal-close">
                  <span class="material-icons">close</span>
                </button>
              </div>
              
              <div class="modal-crud-body">
                <div class="form-grid-2">
                  <div class="form-group form-group-full">
                    <label class="form-label">
                      <span class="material-icons" style="vertical-align: middle; font-size: 18px;">person</span>
                      Nome Completo *
                    </label>
                    <input type="text" x-model="formulario.nome" class="form-input" placeholder="Digite o nome completo" required>
                  </div>
                  
                  <div class="form-group">
                    <label class="form-label">
                      <span class="material-icons" style="vertical-align: middle; font-size: 18px;">phone</span>
                      Telefone
                    </label>
                    <input type="tel" x-model="formulario.telefone" class="form-input" placeholder="(00) 00000-0000">
                  </div>
                  
                  <div class="form-group">
                    <label class="form-label">
                      <span class="material-icons" style="vertical-align: middle; font-size: 18px;">email</span>
                      E-mail
                    </label>
                    <input type="email" x-model="formulario.email" class="form-input" placeholder="exemplo@email.com">
                  </div>
                  
                  <div class="form-group">
                    <label class="form-label">
                      <span class="material-icons" style="vertical-align: middle; font-size: 18px;">event</span>
                      Data da Visita *
                    </label>
                    <input type="date" x-model="formulario.data_visita" class="form-input" required>
                  </div>
                  
                  <div class="form-group">
                    <label class="form-label">
                      <span class="material-icons" style="vertical-align: middle; font-size: 18px;">check_circle</span>
                      Status
                    </label>
                    <select x-model="formulario.status" class="form-select">
                      <option value="confirmado">Confirmado</option>
                      <option value="cancelado">Cancelado</option>
                      <option value="visitou">Visitou</option>
                    </select>
                  </div>
                  
                  <div class="form-group form-group-full">
                    <label class="form-label">Mensagem do Visitante</label>
                    <textarea x-model="formulario.mensagem" rows="3" class="form-textarea" placeholder="Mensagem deixada pelo visitante..."></textarea>
                  </div>
                  
                  <div class="form-group form-group-full">
                    <label class="form-label">Observa√ß√µes Internas</label>
                    <textarea x-model="formulario.observacoes" rows="3" class="form-textarea" placeholder="Observa√ß√µes internas sobre o visitante..."></textarea>
                  </div>
                </div>
              </div>
              
              <div class="modal-crud-footer">
                <button @click="fecharModal()" class="btn-secondary" :disabled="carregando">
                  <span class="material-icons">close</span>
                  Cancelar
                </button>
                <button @click="salvar()" class="btn-primary" :disabled="carregando">
                  <span x-show="!carregando" class="material-icons">save</span>
                  <span x-show="!carregando">Salvar</span>
                  <span x-show="carregando">Salvando...</span>
                </button>
              </div>
            </div>
          </div>
        </div>
        
        <!-- Eventos -->
        <div x-show="secaoAtiva === 'eventos'" x-data="crudEventos()" x-init="init()" x-transition>
          <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 30px;">
            <h2>Gerenciar Eventos</h2>
            <button @click="abrirModal()" class="botao botao-primario">
              <span class="material-icons" style="vertical-align: middle;">add</span>
              Novo Evento
            </button>
          </div>
          
          <div x-show="carregando" class="text-center" style="padding: 40px;">
            <div class="spinner" style="margin: 0 auto;"></div>
            <p>Carregando...</p>
          </div>
          
          <div x-show="!carregando" class="card">
            <table style="width: 100%; border-collapse: collapse;">
              <thead>
                <tr style="background: var(--cinza-muito-claro); border-bottom: 2px solid var(--cinza-leve);">
                  <th style="padding: 15px; text-align: left;">T√≠tulo</th>
                  <th style="padding: 15px; text-align: left;">Data/Hor√°rio</th>
                  <th style="padding: 15px; text-align: center;">Visibilidade</th>
                  <th style="padding: 15px; text-align: center;">Inscri√ß√£o</th>
                  <th style="padding: 15px; text-align: center;">Status</th>
                  <th style="padding: 15px; text-align: center;">A√ß√µes</th>
                </tr>
              </thead>
              <tbody>
                <template x-for="evento in eventos" :key="evento.id">
                  <tr style="border-bottom: 1px solid var(--cinza-leve);">
                    <td style="padding: 15px;"><strong x-text="evento.titulo"></strong></td>
                    <td style="padding: 15px;" x-text="`${formatarData(evento.data)} ${evento.horario || ''}`"></td>
                    <td style="padding: 15px; text-align: center;">
                      <span x-show="!evento.nivel_acesso || evento.nivel_acesso.includes('visitante')" 
                            style="background: #4CAF50; color: white; padding: 4px 8px; border-radius: 12px; font-size: 0.75rem;">
                        üåê P√∫blico
                      </span>
                      <span x-show="evento.nivel_acesso && !evento.nivel_acesso.includes('visitante') && evento.nivel_acesso.includes('membro')" 
                            style="background: #2196F3; color: white; padding: 4px 8px; border-radius: 12px; font-size: 0.75rem;">
                        üë• Membros
                      </span>
                      <span x-show="evento.nivel_acesso && !evento.nivel_acesso.includes('membro') && evento.nivel_acesso.includes('lideranca')" 
                            style="background: #FF9800; color: white; padding: 4px 8px; border-radius: 12px; font-size: 0.75rem;">
                        üëî Lideran√ßa
                      </span>
                    </td>
                    <td style="padding: 15px; text-align: center;">
                      <span x-show="evento.inscricao_aberta" style="color: green;">Aberta</span>
                      <span x-show="!evento.inscricao_aberta" style="color: gray;">Fechada</span>
                    </td>
                    <td style="padding: 15px; text-align: center;">
                      <span x-show="evento.ativo" style="color: green;">Ativo</span>
                      <span x-show="!evento.ativo" style="color: red;">Inativo</span>
                    </td>
                    <td style="padding: 15px; text-align: center;">
                      <button @click="abrirModal(evento)" class="botao botao-pequeno">Editar</button>
                      <button @click="deletar(evento.id)" class="botao botao-pequeno botao-secundario">Deletar</button>
                    </td>
                  </tr>
                </template>
              </tbody>
            </table>
          </div>
          
          <!-- Modal Evento -->
          <div x-show="modalAberto" style="position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: rgba(0,0,0,0.5); z-index: 10000; display: flex; align-items: center; justify-content: center; padding: 20px;" @click.self="fecharModal()">
            <div style="background: white; padding: 30px; border-radius: 15px; max-width: 700px; width: 100%; max-height: 90vh; overflow-y: auto; margin: auto;">
              <h3 x-text="eventoEditando ? 'Editar Evento' : 'Novo Evento'"></h3>
              
              <div style="margin-top: 20px;">
                <label style="display: block; margin-bottom: 5px; font-weight: bold;">T√≠tulo *</label>
                <input type="text" x-model="formulario.titulo" style="width: 100%; padding: 10px; border: 1px solid var(--cinza-leve); border-radius: 5px;" required>
              </div>
              
              <div style="margin-top: 15px;">
                <label style="display: block; margin-bottom: 5px; font-weight: bold;">Descri√ß√£o</label>
                <textarea x-model="formulario.descricao" rows="3" style="width: 100%; padding: 10px; border: 1px solid var(--cinza-leve); border-radius: 5px;"></textarea>
              </div>
              
              <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 15px; margin-top: 15px;">
                <div>
                  <label style="display: block; margin-bottom: 5px; font-weight: bold;">Data *</label>
                  <input type="date" x-model="formulario.data" style="width: 100%; padding: 10px; border: 1px solid var(--cinza-leve); border-radius: 5px;" required>
                </div>
                <div>
                  <label style="display: block; margin-bottom: 5px; font-weight: bold;">Hor√°rio</label>
                  <input type="text" x-model="formulario.horario" placeholder="Ex: 19:00" style="width: 100%; padding: 10px; border: 1px solid var(--cinza-leve); border-radius: 5px;">
                </div>
              </div>
              
              <div style="margin-top: 15px;">
                <label style="display: block; margin-bottom: 5px; font-weight: bold;">Local</label>
                <input type="text" x-model="formulario.local" style="width: 100%; padding: 10px; border: 1px solid var(--cinza-leve); border-radius: 5px;">
              </div>
              
              <div style="margin-top: 15px;">
                <label style="display: block; margin-bottom: 5px; font-weight: bold;">Imagem</label>
                <input type="file" @change="selecionarImagem($event)" accept="image/*" style="width: 100%; padding: 10px; border: 1px solid var(--cinza-leve); border-radius: 5px;">
                <img x-show="previewImagem" :src="previewImagem" style="max-width: 200px; margin-top: 10px; border-radius: 5px;">
              </div>
              
              <div style="margin-top: 15px;">
                <label style="display: flex; align-items: center; gap: 10px;">
                  <input type="checkbox" x-model="formulario.inscricao_aberta">
                  <span>Inscri√ß√£o aberta</span>
                </label>
              </div>
              
              <div style="margin-top: 15px;" x-show="formulario.inscricao_aberta">
                <label style="display: block; margin-bottom: 5px; font-weight: bold;">Link de Inscri√ß√£o</label>
                <input type="url" x-model="formulario.link_inscricao" placeholder="https://..." style="width: 100%; padding: 10px; border: 1px solid var(--cinza-leve); border-radius: 5px;">
              </div>
              
              <div style="margin-top: 15px;">
                <label style="display: flex; align-items: center; gap: 10px;">
                  <input type="checkbox" x-model="formulario.ativo">
                  <span>Ativo</span>
                </label>
              </div>
              
              <!-- N√≠vel de Acesso -->
              <div style="margin-top: 20px; padding: 15px; background: #f8f9fa; border-radius: 8px;">
                <label style="display: block; margin-bottom: 10px; font-weight: bold;">
                  <span class="material-icons" style="vertical-align: middle; font-size: 18px;">visibility</span>
                  Quem pode ver?
                </label>
                <div style="display: flex; flex-wrap: wrap; gap: 8px;">
                  <button type="button" 
                    @click="formulario.nivel_acesso = ['visitante', 'membro', 'lideranca', 'administracao']" 
                    style="padding: 8px 16px; border-radius: 20px; border: 2px solid #ddd; background: white; cursor: pointer; transition: all 0.2s;"
                    :style="(!formulario.nivel_acesso || formulario.nivel_acesso.includes('visitante')) ? 'background: var(--verde-medio); color: white; border-color: var(--verde-medio);' : ''">
                    üåê Todos (P√∫blico)
                  </button>
                  <button type="button" 
                    @click="formulario.nivel_acesso = ['membro', 'lideranca', 'administracao']" 
                    style="padding: 8px 16px; border-radius: 20px; border: 2px solid #ddd; background: white; cursor: pointer; transition: all 0.2s;"
                    :style="(formulario.nivel_acesso && !formulario.nivel_acesso.includes('visitante') && formulario.nivel_acesso.includes('membro')) ? 'background: #2196F3; color: white; border-color: #2196F3;' : ''">
                    üë• Apenas Membros
                  </button>
                  <button type="button" 
                    @click="formulario.nivel_acesso = ['lideranca', 'administracao']" 
                    style="padding: 8px 16px; border-radius: 20px; border: 2px solid #ddd; background: white; cursor: pointer; transition: all 0.2s;"
                    :style="(formulario.nivel_acesso && !formulario.nivel_acesso.includes('membro') && formulario.nivel_acesso.includes('lideranca')) ? 'background: #FF9800; color: white; border-color: #FF9800;' : ''">
                    üëî Lideran√ßa
                  </button>
                </div>
                <small style="display: block; margin-top: 8px; color: #666;">Visitantes n√£o logados s√≥ ver√£o itens marcados como "P√∫blico"</small>
              </div>
              
              <div style="margin-top: 25px; display: flex; gap: 10px; justify-content: flex-end;">
                <button @click="fecharModal()" class="botao botao-secundario" :disabled="carregando">Cancelar</button>
                <button @click="salvar()" class="botao botao-primario" :disabled="carregando">
                  <span x-show="!carregando">Salvar</span>
                  <span x-show="carregando">Salvando...</span>
                </button>
              </div>
            </div>
          </div>
        </div>
        
        <!-- Dados da Igreja e Banc√°rios -->
        <div x-show="secaoAtiva === 'dados-igreja'" x-data="crudDadosIgreja()" x-init="init()" x-transition>
          <div style="margin-bottom: 30px;">
            <h2>Dados da Igreja e Banc√°rios</h2>
            <p style="color: var(--cinza-medio); font-size: 0.9rem; margin-top: 5px;">
              Gerencie as informa√ß√µes da igreja e dados banc√°rios para contribui√ß√µes
            </p>
          </div>
          
          <!-- Abas -->
          <div style="display: flex; gap: 10px; margin-bottom: 20px; border-bottom: 2px solid var(--cinza-leve);">
            <button @click="abaAtiva = 'igreja'" 
                    :style="`padding: 12px 20px; border: none; background: ${abaAtiva === 'igreja' ? 'var(--verde-medio)' : 'transparent'}; color: ${abaAtiva === 'igreja' ? 'white' : 'var(--cinza-escuro)'}; cursor: pointer; border-radius: 8px 8px 0 0; font-weight: ${abaAtiva === 'igreja' ? 'bold' : 'normal'};`">
              Dados da Igreja
            </button>
            <button @click="abaAtiva = 'bancarios'" 
                    :style="`padding: 12px 20px; border: none; background: ${abaAtiva === 'bancarios' ? 'var(--verde-medio)' : 'transparent'}; color: ${abaAtiva === 'bancarios' ? 'white' : 'var(--cinza-escuro)'}; cursor: pointer; border-radius: 8px 8px 0 0; font-weight: ${abaAtiva === 'bancarios' ? 'bold' : 'normal'};`">
              Dados Banc√°rios
            </button>
          </div>
          
          <!-- Aba: Dados da Igreja -->
          <div x-show="abaAtiva === 'igreja'" class="card" style="padding: 30px;">
            <div x-show="carregando" class="text-center" style="padding: 40px;">
              <div class="spinner" style="margin: 0 auto;"></div>
              <p>Carregando...</p>
            </div>
            
            <div x-show="!carregando">
              <form @submit.prevent="salvarIgreja()">
                <h3 style="margin-bottom: 20px; color: var(--verde-escuro);">Informa√ß√µes Gerais</h3>
                
                <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 15px; margin-bottom: 15px;">
                  <div>
                    <label style="display: block; margin-bottom: 5px; font-weight: bold;">Nome da Igreja *</label>
                    <input type="text" x-model="formularioIgreja.nome" style="width: 100%; padding: 10px; border: 1px solid var(--cinza-leve); border-radius: 5px;" required>
                  </div>
                  <div>
                    <label style="display: block; margin-bottom: 5px; font-weight: bold;">Nome Abreviado</label>
                    <input type="text" x-model="formularioIgreja.nome_abreviado" style="width: 100%; padding: 10px; border: 1px solid var(--cinza-leve); border-radius: 5px;">
                  </div>
                </div>
                
                <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 15px; margin-bottom: 15px;">
                  <div>
                    <label style="display: block; margin-bottom: 5px; font-weight: bold;">Denomina√ß√£o</label>
                    <input type="text" x-model="formularioIgreja.denominacao" style="width: 100%; padding: 10px; border: 1px solid var(--cinza-leve); border-radius: 5px;">
                  </div>
                  <div>
                    <label style="display: block; margin-bottom: 5px; font-weight: bold;">Ano de Funda√ß√£o</label>
                    <input type="text" x-model="formularioIgreja.fundacao" style="width: 100%; padding: 10px; border: 1px solid var(--cinza-leve); border-radius: 5px;">
                  </div>
                </div>
                
                <h3 style="margin: 30px 0 20px 0; color: var(--verde-escuro);">Endere√ßo</h3>
                
                <div style="margin-bottom: 15px;">
                  <label style="display: block; margin-bottom: 5px; font-weight: bold;">Logradouro *</label>
                  <input type="text" x-model="formularioIgreja.logradouro" placeholder="Ex: Av. Antonio Carlos do Amaral" style="width: 100%; padding: 10px; border: 1px solid var(--cinza-leve); border-radius: 5px;" required>
                </div>
                
                <div style="display: grid; grid-template-columns: 1fr 1fr 1fr; gap: 15px; margin-bottom: 15px;">
                  <div>
                    <label style="display: block; margin-bottom: 5px; font-weight: bold;">N√∫mero</label>
                    <input type="text" x-model="formularioIgreja.numero" placeholder="Ex: 123 ou Sem n√∫mero" style="width: 100%; padding: 10px; border: 1px solid var(--cinza-leve); border-radius: 5px;">
                  </div>
                  <div>
                    <label style="display: block; margin-bottom: 5px; font-weight: bold;">Complemento</label>
                    <input type="text" x-model="formularioIgreja.complemento" style="width: 100%; padding: 10px; border: 1px solid var(--cinza-leve); border-radius: 5px;">
                  </div>
                  <div>
                    <label style="display: block; margin-bottom: 5px; font-weight: bold;">Bairro</label>
                    <input type="text" x-model="formularioIgreja.bairro" placeholder="Ex: Res. Cosmos" style="width: 100%; padding: 10px; border: 1px solid var(--cinza-leve); border-radius: 5px;">
                  </div>
                </div>
                
                <div style="display: grid; grid-template-columns: 1fr 1fr 1fr; gap: 15px; margin-bottom: 15px;">
                  <div>
                    <label style="display: block; margin-bottom: 5px; font-weight: bold;">Cidade</label>
                    <input type="text" x-model="formularioIgreja.cidade" placeholder="Ex: Campinas" style="width: 100%; padding: 10px; border: 1px solid var(--cinza-leve); border-radius: 5px;">
                  </div>
                  <div>
                    <label style="display: block; margin-bottom: 5px; font-weight: bold;">Estado</label>
                    <input type="text" x-model="formularioIgreja.estado" placeholder="Ex: SP" maxlength="2" style="width: 100%; padding: 10px; border: 1px solid var(--cinza-leve); border-radius: 5px;">
                  </div>
                  <div>
                    <label style="display: block; margin-bottom: 5px; font-weight: bold;">CEP</label>
                    <input type="text" x-model="formularioIgreja.cep" placeholder="00000-000" style="width: 100%; padding: 10px; border: 1px solid var(--cinza-leve); border-radius: 5px;">
                  </div>
                </div>
                
                <h3 style="margin: 30px 0 20px 0; color: var(--verde-escuro);">Contato</h3>
                
                <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 15px; margin-bottom: 15px;">
                  <div>
                    <label style="display: block; margin-bottom: 5px; font-weight: bold;">Telefone</label>
                    <input type="text" x-model="formularioIgreja.telefone" placeholder="(19) 99999-9999" style="width: 100%; padding: 10px; border: 1px solid var(--cinza-leve); border-radius: 5px;">
                  </div>
                  <div>
                    <label style="display: block; margin-bottom: 5px; font-weight: bold;">WhatsApp</label>
                    <input type="text" x-model="formularioIgreja.whatsapp" placeholder="5519999999999" style="width: 100%; padding: 10px; border: 1px solid var(--cinza-leve); border-radius: 5px;">
                  </div>
                </div>
                
                <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 15px; margin-bottom: 15px;">
                  <div>
                    <label style="display: block; margin-bottom: 5px; font-weight: bold;">Email</label>
                    <input type="email" x-model="formularioIgreja.email" placeholder="contato@igreja.com" style="width: 100%; padding: 10px; border: 1px solid var(--cinza-leve); border-radius: 5px;">
                  </div>
                  <div>
                    <label style="display: block; margin-bottom: 5px; font-weight: bold;">Email Secretaria</label>
                    <input type="email" x-model="formularioIgreja.email_secretaria" placeholder="secretaria@igreja.com" style="width: 100%; padding: 10px; border: 1px solid var(--cinza-leve); border-radius: 5px;">
                  </div>
                </div>
                
                <h3 style="margin: 30px 0 20px 0; color: var(--verde-escuro);">Hor√°rios</h3>
                
                <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 15px; margin-bottom: 15px;">
                  <div>
                    <label style="display: block; margin-bottom: 5px; font-weight: bold;">Culto Sexta-feira</label>
                    <input type="text" x-model="formularioIgreja.culto_sexta_horario" placeholder="Ex: 20h00" style="width: 100%; padding: 10px; border: 1px solid var(--cinza-leve); border-radius: 5px;">
                  </div>
                  <div>
                    <label style="display: block; margin-bottom: 5px; font-weight: bold;">Culto Domingo</label>
                    <input type="text" x-model="formularioIgreja.culto_domingo_horario" placeholder="Ex: 10h00" style="width: 100%; padding: 10px; border: 1px solid var(--cinza-leve); border-radius: 5px;">
                  </div>
                </div>
                
                <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 15px; margin-bottom: 15px;">
                  <div>
                    <label style="display: block; margin-bottom: 5px; font-weight: bold;">Secretaria - Dias</label>
                    <input type="text" x-model="formularioIgreja.secretaria_dias" placeholder="Ex: Segunda a Sexta" style="width: 100%; padding: 10px; border: 1px solid var(--cinza-leve); border-radius: 5px;">
                  </div>
                  <div>
                    <label style="display: block; margin-bottom: 5px; font-weight: bold;">Secretaria - Hor√°rio</label>
                    <input type="text" x-model="formularioIgreja.secretaria_horario" placeholder="Ex: 9h00 √†s 17h00" style="width: 100%; padding: 10px; border: 1px solid var(--cinza-leve); border-radius: 5px;">
                  </div>
                </div>
                
                <h3 style="margin: 30px 0 20px 0; color: var(--verde-escuro);">Lideran√ßa</h3>
                
                <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 15px; margin-bottom: 15px;">
                  <div>
                    <label style="display: block; margin-bottom: 5px; font-weight: bold;">Nome do Pastor</label>
                    <input type="text" x-model="formularioIgreja.pastor_nome" placeholder="Ex: Rev. En√©ias Mendes" style="width: 100%; padding: 10px; border: 1px solid var(--cinza-leve); border-radius: 5px;">
                  </div>
                  <div>
                    <label style="display: block; margin-bottom: 5px; font-weight: bold;">T√≠tulo</label>
                    <input type="text" x-model="formularioIgreja.pastor_titulo" placeholder="Ex: Pastor Titular" style="width: 100%; padding: 10px; border: 1px solid var(--cinza-leve); border-radius: 5px;">
                  </div>
                </div>
                
                <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 15px; margin-bottom: 20px;">
                  <div>
                    <label style="display: block; margin-bottom: 5px; font-weight: bold;">Instagram</label>
                    <input type="text" x-model="formularioIgreja.pastor_instagram" placeholder="@pr.eneiasmendes" style="width: 100%; padding: 10px; border: 1px solid var(--cinza-leve); border-radius: 5px;">
                  </div>
                  <div>
                    <label style="display: block; margin-bottom: 5px; font-weight: bold;">Email do Pastor</label>
                    <input type="email" x-model="formularioIgreja.pastor_email" placeholder="pastor@igreja.com" style="width: 100%; padding: 10px; border: 1px solid var(--cinza-leve); border-radius: 5px;">
                  </div>
                </div>
                
                <div style="margin-top: 30px; display: flex; gap: 10px; justify-content: flex-end;">
                  <button type="submit" class="botao botao-primario" :disabled="carregando">
                    <span x-show="!carregando">Salvar Dados da Igreja</span>
                    <span x-show="carregando">Salvando...</span>
                  </button>
                </div>
              </form>
            </div>
          </div>
          
          <!-- Aba: Dados Banc√°rios -->
          <div x-show="abaAtiva === 'bancarios'">
            <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 20px;">
              <h3>Dados Banc√°rios para Contribui√ß√µes</h3>
              <button @click="abrirModalBancario()" class="botao botao-primario">
                <span class="material-icons" style="vertical-align: middle;">add</span>
                Novo Dado Banc√°rio
              </button>
            </div>
            
            <div x-show="carregando" class="text-center" style="padding: 40px;">
              <div class="spinner" style="margin: 0 auto;"></div>
              <p>Carregando...</p>
            </div>
            
            <div x-show="!carregando" class="card">
              <table style="width: 100%; border-collapse: collapse;">
                <thead>
                  <tr style="background: var(--cinza-muito-claro); border-bottom: 2px solid var(--cinza-leve);">
                    <th style="padding: 15px; text-align: left;">Favorecido</th>
                    <th style="padding: 15px; text-align: left;">Banco</th>
                    <th style="padding: 15px; text-align: left;">PIX</th>
                    <th style="padding: 15px; text-align: center;">Status</th>
                    <th style="padding: 15px; text-align: center;">A√ß√µes</th>
                  </tr>
                </thead>
                <tbody>
                  <template x-for="dado in dadosBancarios" :key="dado.id">
                    <tr style="border-bottom: 1px solid var(--cinza-leve);">
                      <td style="padding: 15px;"><strong x-text="dado.favorecido"></strong></td>
                      <td style="padding: 15px;" x-text="`${dado.banco_nome || ''} - Ag: ${dado.agencia || ''} / Conta: ${dado.conta || ''}`"></td>
                      <td style="padding: 15px;" x-text="dado.pix_chave || '-'"></td>
                      <td style="padding: 15px; text-align: center;">
                        <span x-show="dado.ativo" style="color: green;">Ativo</span>
                        <span x-show="!dado.ativo" style="color: red;">Inativo</span>
                      </td>
                      <td style="padding: 15px; text-align: center;">
                        <button @click="abrirModalBancario(dado)" class="botao botao-pequeno">Editar</button>
                        <button @click="deletarBancario(dado.id)" class="botao botao-pequeno botao-secundario">Deletar</button>
                      </td>
                    </tr>
                  </template>
                  <tr x-show="dadosBancarios.length === 0">
                    <td colspan="5" style="padding: 40px; text-align: center; color: var(--cinza-medio);">
                      Nenhum dado banc√°rio cadastrado
                    </td>
                  </tr>
                </tbody>
              </table>
            </div>
            
            <!-- Modal Dados Banc√°rios -->
            <div x-show="modalAberto && abaAtiva === 'bancarios'" style="position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: rgba(0,0,0,0.5); z-index: 10000; display: flex; align-items: center; justify-content: center; padding: 20px;" @click.self="fecharModal()">
              <div style="background: white; padding: 30px; border-radius: 15px; max-width: 700px; width: 100%; max-height: 90vh; overflow-y: auto; margin: auto;">
                <h3 x-text="formularioBancario.id ? 'Editar Dado Banc√°rio' : 'Novo Dado Banc√°rio'"></h3>
                
                <div style="margin-top: 20px;">
                  <label style="display: block; margin-bottom: 5px; font-weight: bold;">Favorecido *</label>
                  <input type="text" x-model="formularioBancario.favorecido" style="width: 100%; padding: 10px; border: 1px solid var(--cinza-leve); border-radius: 5px;" required>
                </div>
                
                <div style="margin-top: 15px;">
                  <label style="display: block; margin-bottom: 5px; font-weight: bold;">CNPJ</label>
                  <input type="text" x-model="formularioBancario.cnpj" placeholder="00.000.000/0000-00" style="width: 100%; padding: 10px; border: 1px solid var(--cinza-leve); border-radius: 5px;">
                </div>
                
                <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 15px; margin-top: 15px;">
                  <div>
                    <label style="display: block; margin-bottom: 5px; font-weight: bold;">Nome do Banco</label>
                    <input type="text" x-model="formularioBancario.banco_nome" style="width: 100%; padding: 10px; border: 1px solid var(--cinza-leve); border-radius: 5px;">
                  </div>
                  <div>
                    <label style="display: block; margin-bottom: 5px; font-weight: bold;">C√≥digo do Banco</label>
                    <input type="text" x-model="formularioBancario.banco_codigo" style="width: 100%; padding: 10px; border: 1px solid var(--cinza-leve); border-radius: 5px;">
                  </div>
                </div>
                
                <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 15px; margin-top: 15px;">
                  <div>
                    <label style="display: block; margin-bottom: 5px; font-weight: bold;">Ag√™ncia</label>
                    <input type="text" x-model="formularioBancario.agencia" style="width: 100%; padding: 10px; border: 1px solid var(--cinza-leve); border-radius: 5px;">
                  </div>
                  <div>
                    <label style="display: block; margin-bottom: 5px; font-weight: bold;">Conta</label>
                    <input type="text" x-model="formularioBancario.conta" style="width: 100%; padding: 10px; border: 1px solid var(--cinza-leve); border-radius: 5px;">
                  </div>
                </div>
                
                <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 15px; margin-top: 15px;">
                  <div>
                    <label style="display: block; margin-bottom: 5px; font-weight: bold;">Tipo PIX</label>
                    <select x-model="formularioBancario.pix_tipo" style="width: 100%; padding: 10px; border: 1px solid var(--cinza-leve); border-radius: 5px;">
                      <option value="">Selecione</option>
                      <option value="cpf">CPF</option>
                      <option value="cnpj">CNPJ</option>
                      <option value="email">Email</option>
                      <option value="telefone">Telefone</option>
                      <option value="chave_aleatoria">Chave Aleat√≥ria</option>
                    </select>
                  </div>
                  <div>
                    <label style="display: block; margin-bottom: 5px; font-weight: bold;">Chave PIX</label>
                    <input type="text" x-model="formularioBancario.pix_chave" style="width: 100%; padding: 10px; border: 1px solid var(--cinza-leve); border-radius: 5px;">
                  </div>
                </div>
                
                <div style="margin-top: 15px;">
                  <label style="display: block; margin-bottom: 5px; font-weight: bold;">QR Code (Imagem)</label>
                  <input type="file" @change="selecionarQRCode($event)" accept="image/*" style="width: 100%; padding: 10px; border: 1px solid var(--cinza-leve); border-radius: 5px;">
                  <img x-show="previewQRCode" :src="previewQRCode" style="max-width: 200px; margin-top: 10px; border-radius: 5px;">
                </div>
                
                <div style="margin-top: 15px;">
                  <label style="display: block; margin-bottom: 5px; font-weight: bold;">Instru√ß√µes do QR Code</label>
                  <textarea x-model="formularioBancario.qrcode_instrucoes" rows="3" style="width: 100%; padding: 10px; border: 1px solid var(--cinza-leve); border-radius: 5px;"></textarea>
                </div>
                
                <div style="margin-top: 15px;">
                  <label style="display: block; margin-bottom: 5px; font-weight: bold;">Mensagem de Informa√ß√µes</label>
                  <textarea x-model="formularioBancario.informacoes_mensagem" rows="3" style="width: 100%; padding: 10px; border: 1px solid var(--cinza-leve); border-radius: 5px;"></textarea>
                </div>
                
                <div style="margin-top: 15px;">
                  <label style="display: flex; align-items: center; gap: 10px;">
                    <input type="checkbox" x-model="formularioBancario.ativo">
                    <span>Ativo</span>
                  </label>
                </div>
                
                <div style="margin-top: 25px; display: flex; gap: 10px; justify-content: flex-end;">
                  <button @click="fecharModal()" class="botao botao-secundario" :disabled="carregando">Cancelar</button>
                  <button @click="salvarBancario()" class="botao botao-primario" :disabled="carregando">
                    <span x-show="!carregando">Salvar</span>
                    <span x-show="carregando">Salvando...</span>
                  </button>
                </div>
              </div>
            </div>
          </div>
        </div>
        
        <!-- Redes Sociais -->
        <div x-show="secaoAtiva === 'redes-sociais'" x-data="crudRedesSociais()" x-init="init()" x-transition>
          <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 30px;">
            <h2>Redes Sociais</h2>
            <button @click="abrirModal()" class="botao botao-primario">
              <span class="material-icons" style="vertical-align: middle;">add</span>
              Nova Rede Social
            </button>
          </div>
          
          <div x-show="carregando" class="text-center" style="padding: 40px;">
            <div class="spinner" style="margin: 0 auto;"></div>
            <p>Carregando...</p>
          </div>
          
          <div x-show="!carregando" class="card">
            <table style="width: 100%; border-collapse: collapse;">
              <thead>
                <tr style="background: var(--cinza-muito-claro); border-bottom: 2px solid var(--cinza-leve);">
                  <th style="padding: 15px; text-align: left;">Nome</th>
                  <th style="padding: 15px; text-align: left;">URL</th>
                  <th style="padding: 15px; text-align: center;">Visibilidade</th>
                  <th style="padding: 15px; text-align: center;">Status</th>
                  <th style="padding: 15px; text-align: center;">A√ß√µes</th>
                </tr>
              </thead>
              <tbody>
                <template x-for="rede in redes" :key="rede.id">
                  <tr style="border-bottom: 1px solid var(--cinza-leve);">
                    <td style="padding: 15px;"><strong x-text="rede.nome"></strong></td>
                    <td style="padding: 15px;"><a :href="rede.url" target="_blank" x-text="rede.url"></a></td>
                    <td style="padding: 15px; text-align: center;">
                      <span x-show="!rede.nivel_acesso || rede.nivel_acesso.includes('visitante')" 
                            style="background: #4CAF50; color: white; padding: 4px 8px; border-radius: 12px; font-size: 0.75rem;">
                        üåê P√∫blico
                      </span>
                      <span x-show="rede.nivel_acesso && !rede.nivel_acesso.includes('visitante') && rede.nivel_acesso.includes('membro')" 
                            style="background: #2196F3; color: white; padding: 4px 8px; border-radius: 12px; font-size: 0.75rem;">
                        üë• Membros
                      </span>
                      <span x-show="rede.nivel_acesso && !rede.nivel_acesso.includes('membro') && rede.nivel_acesso.includes('lideranca')" 
                            style="background: #FF9800; color: white; padding: 4px 8px; border-radius: 12px; font-size: 0.75rem;">
                        üëî Lideran√ßa
                      </span>
                    </td>
                    <td style="padding: 15px; text-align: center;">
                      <span x-show="rede.ativo" style="color: green;">Ativo</span>
                      <span x-show="!rede.ativo" style="color: red;">Inativo</span>
                    </td>
                    <td style="padding: 15px; text-align: center;">
                      <button @click="abrirModal(rede)" class="botao botao-pequeno">Editar</button>
                      <button @click="deletar(rede.id)" class="botao botao-pequeno botao-secundario">Deletar</button>
                    </td>
                  </tr>
                </template>
              </tbody>
            </table>
          </div>
          
          <!-- Modal Redes Sociais -->
          <div x-show="modalAberto" style="position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: rgba(0,0,0,0.5); z-index: 10000; display: flex; align-items: center; justify-content: center; padding: 20px;" @click.self="fecharModal()">
            <div style="background: white; padding: 30px; border-radius: 15px; max-width: 600px; width: 100%; max-height: 90vh; overflow-y: auto; margin: auto;">
              <h3 x-text="redeEditando ? 'Editar Rede Social' : 'Nova Rede Social'"></h3>
              
              <div style="margin-top: 20px;">
                <label style="display: block; margin-bottom: 5px; font-weight: bold;">Nome *</label>
                <input type="text" x-model="formulario.nome" placeholder="Ex: YouTube, Instagram" style="width: 100%; padding: 10px; border: 1px solid var(--cinza-leve); border-radius: 5px;" required>
              </div>
              
              <div style="margin-top: 15px;">
                <label style="display: block; margin-bottom: 5px; font-weight: bold;">Usu√°rio/Handle</label>
                <input type="text" x-model="formulario.usuario" placeholder="Ex: @ipbvida" style="width: 100%; padding: 10px; border: 1px solid var(--cinza-leve); border-radius: 5px;">
              </div>
              
              <div style="margin-top: 15px;">
                <label style="display: block; margin-bottom: 5px; font-weight: bold;">URL *</label>
                <input type="url" x-model="formulario.url" placeholder="https://..." style="width: 100%; padding: 10px; border: 1px solid var(--cinza-leve); border-radius: 5px;" required>
              </div>
              
              <div style="margin-top: 15px;">
                <label style="display: block; margin-bottom: 5px; font-weight: bold;">√çcone (Bootstrap Icons)</label>
                <input type="text" x-model="formulario.icone" placeholder="Ex: bi-youtube, bi-instagram" style="width: 100%; padding: 10px; border: 1px solid var(--cinza-leve); border-radius: 5px;">
                <small style="color: var(--cinza-medio);">Classes do Bootstrap Icons (bi-*)</small>
              </div>
              
              <div style="margin-top: 15px;">
                <label style="display: block; margin-bottom: 5px; font-weight: bold;">Cor</label>
                <input type="color" x-model="formulario.cor" style="width: 100%; padding: 10px; border: 1px solid var(--cinza-leve); border-radius: 5px;">
              </div>
              
              <div style="margin-top: 15px;">
                <label style="display: block; margin-bottom: 5px; font-weight: bold;">Descri√ß√£o</label>
                <textarea x-model="formulario.descricao" rows="2" style="width: 100%; padding: 10px; border: 1px solid var(--cinza-leve); border-radius: 5px;"></textarea>
              </div>
              
              <div style="margin-top: 15px;">
                <label style="display: block; margin-bottom: 5px; font-weight: bold;">Ordem</label>
                <input type="number" x-model="formulario.ordem" style="width: 100%; padding: 10px; border: 1px solid var(--cinza-leve); border-radius: 5px;">
              </div>
              
              <div style="margin-top: 15px;">
                <label style="display: flex; align-items: center; gap: 10px;">
                  <input type="checkbox" x-model="formulario.ativo">
                  <span>Ativo</span>
                </label>
              </div>
              
              <!-- N√≠vel de Acesso -->
              <div style="margin-top: 20px; padding: 15px; background: #f8f9fa; border-radius: 8px;">
                <label style="display: block; margin-bottom: 10px; font-weight: bold;">
                  <span class="material-icons" style="vertical-align: middle; font-size: 18px;">visibility</span>
                  Quem pode ver?
                </label>
                <div style="display: flex; flex-wrap: wrap; gap: 8px;">
                  <button type="button" 
                    @click="formulario.nivel_acesso = ['visitante', 'membro', 'lideranca', 'administracao']" 
                    style="padding: 8px 16px; border-radius: 20px; border: 2px solid #ddd; background: white; cursor: pointer; transition: all 0.2s;"
                    :style="(!formulario.nivel_acesso || formulario.nivel_acesso.includes('visitante')) ? 'background: var(--verde-medio); color: white; border-color: var(--verde-medio);' : ''">
                    üåê Todos (P√∫blico)
                  </button>
                  <button type="button" 
                    @click="formulario.nivel_acesso = ['membro', 'lideranca', 'administracao']" 
                    style="padding: 8px 16px; border-radius: 20px; border: 2px solid #ddd; background: white; cursor: pointer; transition: all 0.2s;"
                    :style="(formulario.nivel_acesso && !formulario.nivel_acesso.includes('visitante') && formulario.nivel_acesso.includes('membro')) ? 'background: #2196F3; color: white; border-color: #2196F3;' : ''">
                    üë• Apenas Membros
                  </button>
                  <button type="button" 
                    @click="formulario.nivel_acesso = ['lideranca', 'administracao']" 
                    style="padding: 8px 16px; border-radius: 20px; border: 2px solid #ddd; background: white; cursor: pointer; transition: all 0.2s;"
                    :style="(formulario.nivel_acesso && !formulario.nivel_acesso.includes('membro') && formulario.nivel_acesso.includes('lideranca')) ? 'background: #FF9800; color: white; border-color: #FF9800;' : ''">
                    üëî Lideran√ßa
                  </button>
                </div>
                <small style="display: block; margin-top: 8px; color: #666;">Visitantes n√£o logados s√≥ ver√£o itens marcados como "P√∫blico"</small>
              </div>
              
              <div style="margin-top: 25px; display: flex; gap: 10px; justify-content: flex-end;">
                <button @click="fecharModal()" class="botao botao-secundario" :disabled="carregando">Cancelar</button>
                <button @click="salvar()" class="botao botao-primario" :disabled="carregando">
                  <span x-show="!carregando">Salvar</span>
                  <span x-show="carregando">Salvando...</span>
                </button>
              </div>
            </div>
          </div>
        </div>
        
        <!-- ==================== CATEC√öMENOS ==================== -->
        <div x-show="secaoAtiva === 'catecumenos'" x-data="crudCatecumenos()" x-init="init()" x-transition>
          <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 20px; flex-wrap: wrap; gap: 15px;">
            <div>
              <h2 style="margin: 0;">Gerenciar Catec√∫menos</h2>
              <p style="color: var(--cinza-medio); font-size: 0.9rem; margin-top: 5px;">
                Gerencie as inscri√ß√µes para classes de catec√∫menos
              </p>
            </div>
            <div style="display: flex; gap: 10px;">
              <button @click="exportarCSV()" class="botao botao-secundario">
                <span class="material-icons" style="vertical-align: middle; font-size: 18px;">download</span>
                Exportar CSV
              </button>
              <button @click="abrirModal()" class="botao botao-primario">
                <span class="material-icons" style="vertical-align: middle;">add</span>
                Novo Catec√∫meno
              </button>
            </div>
          </div>
          
          <!-- Filtros -->
          <div style="display: flex; gap: 15px; margin-bottom: 20px; flex-wrap: wrap;">
            <div style="flex: 1; min-width: 200px;">
              <input type="text" x-model="busca" placeholder="Buscar por nome, email ou telefone..." 
                     style="width: 100%; padding: 10px 15px; border: 1px solid var(--cinza-leve); border-radius: 8px;">
            </div>
            <select x-model="filtroStatus" style="padding: 10px 15px; border: 1px solid var(--cinza-leve); border-radius: 8px; min-width: 150px;">
              <option value="todos">Todos os status</option>
              <option value="pendente">Pendente</option>
              <option value="aprovado">Aprovado</option>
              <option value="em_andamento">Em Andamento</option>
              <option value="concluido">Conclu√≠do</option>
              <option value="desistente">Desistente</option>
            </select>
            <select x-model="filtroTurma" style="padding: 10px 15px; border: 1px solid var(--cinza-leve); border-radius: 8px; min-width: 150px;">
              <option value="todas">Todas as turmas</option>
              <option value="sem_turma">Sem turma</option>
              <template x-for="turma in turmas" :key="turma.id">
                <option :value="turma.id" x-text="turma.nome"></option>
              </template>
            </select>
          </div>
          
          <div x-show="carregando" class="text-center" style="padding: 40px;">
            <div class="spinner" style="margin: 0 auto;"></div>
            <p>Carregando...</p>
          </div>
          
          <div x-show="!carregando" class="card">
            <table style="width: 100%; border-collapse: collapse;">
              <thead>
                <tr style="background: var(--cinza-muito-claro); border-bottom: 2px solid var(--cinza-leve);">
                  <th style="padding: 15px; text-align: left;">Nome</th>
                  <th style="padding: 15px; text-align: left;">Contato</th>
                  <th style="padding: 15px; text-align: left;">Turma</th>
                  <th style="padding: 15px; text-align: center;">Status</th>
                  <th style="padding: 15px; text-align: left;">Inscri√ß√£o</th>
                  <th style="padding: 15px; text-align: center;">A√ß√µes</th>
                </tr>
              </thead>
              <tbody>
                <template x-for="catecumeno in catecumenosFiltrados" :key="catecumeno.id">
                  <tr style="border-bottom: 1px solid var(--cinza-leve);">
                    <td style="padding: 15px;">
                      <strong x-text="catecumeno.nome"></strong>
                      <div x-show="catecumeno.ja_batizado" style="font-size: 0.75rem; color: var(--verde-escuro);">
                        <span class="material-icons" style="font-size: 14px; vertical-align: middle;">check_circle</span>
                        Batizado
                      </div>
                    </td>
                    <td style="padding: 15px;">
                      <div x-text="catecumeno.telefone"></div>
                      <div x-text="catecumeno.email" style="font-size: 0.85rem; color: var(--cinza-medio);"></div>
                    </td>
                    <td style="padding: 15px;">
                      <select @change="atribuirTurma(catecumeno, $event.target.value)" 
                              :value="catecumeno.turma_id || ''"
                              style="padding: 5px 10px; border: 1px solid var(--cinza-leve); border-radius: 5px; font-size: 0.85rem;">
                        <option value="">Sem turma</option>
                        <template x-for="turma in turmas" :key="turma.id">
                          <option :value="turma.id" x-text="turma.nome"></option>
                        </template>
                      </select>
                    </td>
                    <td style="padding: 15px; text-align: center;">
                      <select @change="atualizarStatus(catecumeno, $event.target.value)" 
                              :value="catecumeno.status"
                              :style="`padding: 5px 10px; border-radius: 20px; font-size: 0.8rem; font-weight: 600; border: none; cursor: pointer; ${
                                catecumeno.status === 'pendente' ? 'background: #fff3cd; color: #856404;' :
                                catecumeno.status === 'aprovado' ? 'background: #d1ecf1; color: #0c5460;' :
                                catecumeno.status === 'em_andamento' ? 'background: #e8f5e9; color: #1A4731;' :
                                catecumeno.status === 'concluido' ? 'background: #d4edda; color: #155724;' :
                                'background: #f8d7da; color: #721c24;'
                              }`">
                        <option value="pendente">Pendente</option>
                        <option value="aprovado">Aprovado</option>
                        <option value="em_andamento">Em Andamento</option>
                        <option value="concluido">Conclu√≠do</option>
                        <option value="desistente">Desistente</option>
                      </select>
                    </td>
                    <td style="padding: 15px; font-size: 0.85rem;" x-text="formatarDataHora(catecumeno.created_at)"></td>
                    <td style="padding: 15px; text-align: center;">
                      <button @click="verDetalhes(catecumeno)" class="botao botao-pequeno" title="Ver detalhes" style="margin-right: 5px;">
                        <span class="material-icons" style="font-size: 16px;">visibility</span>
                      </button>
                      <button @click="abrirModal(catecumeno)" class="botao botao-pequeno" title="Editar" style="margin-right: 5px;">
                        <span class="material-icons" style="font-size: 16px;">edit</span>
                      </button>
                      <button @click="deletar(catecumeno.id)" class="botao botao-pequeno botao-secundario" title="Deletar">
                        <span class="material-icons" style="font-size: 16px;">delete</span>
                      </button>
                    </td>
                  </tr>
                </template>
                <tr x-show="catecumenosFiltrados.length === 0">
                  <td colspan="6" style="padding: 40px; text-align: center; color: var(--cinza-medio);">
                    <span class="material-icons" style="font-size: 48px; opacity: 0.5;">school</span>
                    <p>Nenhum catec√∫meno encontrado</p>
                  </td>
                </tr>
              </tbody>
            </table>
          </div>
          
          <!-- Modal de Edi√ß√£o/Cria√ß√£o Catec√∫meno -->
          <div x-show="modalAberto" 
               style="position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: rgba(0,0,0,0.5); z-index: 10000; display: flex; align-items: center; justify-content: center; padding: 20px;" 
               @click.self="fecharModal()">
            <div style="background: white; padding: 30px; border-radius: 15px; max-width: 700px; width: 100%; max-height: 90vh; overflow-y: auto; margin: auto;">
              <h3 x-text="catecumenoEditando ? 'Editar Catec√∫meno' : 'Novo Catec√∫meno'"></h3>
              
              <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 15px; margin-top: 20px;">
                <div style="grid-column: span 2;">
                  <label style="display: block; margin-bottom: 5px; font-weight: bold;">Nome Completo *</label>
                  <input type="text" x-model="formulario.nome" style="width: 100%; padding: 10px; border: 1px solid var(--cinza-leve); border-radius: 5px;" required>
                </div>
                
                <div>
                  <label style="display: block; margin-bottom: 5px; font-weight: bold;">Telefone *</label>
                  <input type="tel" x-model="formulario.telefone" style="width: 100%; padding: 10px; border: 1px solid var(--cinza-leve); border-radius: 5px;" required>
                </div>
                
                <div>
                  <label style="display: block; margin-bottom: 5px; font-weight: bold;">Email</label>
                  <input type="email" x-model="formulario.email" style="width: 100%; padding: 10px; border: 1px solid var(--cinza-leve); border-radius: 5px;">
                </div>
                
                <div>
                  <label style="display: block; margin-bottom: 5px; font-weight: bold;">Data de Nascimento</label>
                  <input type="date" x-model="formulario.data_nascimento" style="width: 100%; padding: 10px; border: 1px solid var(--cinza-leve); border-radius: 5px;">
                </div>
                
                <div>
                  <label style="display: block; margin-bottom: 5px; font-weight: bold;">Estado Civil</label>
                  <select x-model="formulario.estado_civil" style="width: 100%; padding: 10px; border: 1px solid var(--cinza-leve); border-radius: 5px;">
                    <option value="">Selecione...</option>
                    <template x-for="ec in estadosCivis" :key="ec.valor">
                      <option :value="ec.valor" x-text="ec.label"></option>
                    </template>
                  </select>
                </div>
                
                <div style="grid-column: span 2;">
                  <label style="display: block; margin-bottom: 5px; font-weight: bold;">Endere√ßo</label>
                  <input type="text" x-model="formulario.endereco" style="width: 100%; padding: 10px; border: 1px solid var(--cinza-leve); border-radius: 5px;">
                </div>
                
                <div>
                  <label style="display: block; margin-bottom: 5px; font-weight: bold;">Profiss√£o</label>
                  <input type="text" x-model="formulario.profissao" style="width: 100%; padding: 10px; border: 1px solid var(--cinza-leve); border-radius: 5px;">
                </div>
                
                <div>
                  <label style="display: block; margin-bottom: 5px; font-weight: bold;">Turma</label>
                  <select x-model="formulario.turma_id" style="width: 100%; padding: 10px; border: 1px solid var(--cinza-leve); border-radius: 5px;">
                    <option value="">Sem turma</option>
                    <template x-for="turma in turmas" :key="turma.id">
                      <option :value="turma.id" x-text="turma.nome"></option>
                    </template>
                  </select>
                </div>
                
                <div style="grid-column: span 2;">
                  <label style="display: flex; align-items: center; gap: 10px; margin-bottom: 10px;">
                    <input type="checkbox" x-model="formulario.ja_batizado">
                    <span>J√° √© batizado?</span>
                  </label>
                  <div x-show="formulario.ja_batizado">
                    <label style="display: block; margin-bottom: 5px; font-weight: bold;">Igreja onde foi batizado</label>
                    <input type="text" x-model="formulario.igreja_anterior" style="width: 100%; padding: 10px; border: 1px solid var(--cinza-leve); border-radius: 5px;">
                  </div>
                </div>
                
                <div style="grid-column: span 2;">
                  <label style="display: block; margin-bottom: 5px; font-weight: bold;">Como conheceu a igreja?</label>
                  <input type="text" x-model="formulario.como_conheceu" style="width: 100%; padding: 10px; border: 1px solid var(--cinza-leve); border-radius: 5px;">
                </div>
                
                <div style="grid-column: span 2;">
                  <label style="display: block; margin-bottom: 5px; font-weight: bold;">Motiva√ß√£o</label>
                  <textarea x-model="formulario.motivacao" rows="3" style="width: 100%; padding: 10px; border: 1px solid var(--cinza-leve); border-radius: 5px;"></textarea>
                </div>
                
                <div>
                  <label style="display: block; margin-bottom: 5px; font-weight: bold;">Status</label>
                  <select x-model="formulario.status" style="width: 100%; padding: 10px; border: 1px solid var(--cinza-leve); border-radius: 5px;">
                    <template x-for="s in statusOptions" :key="s.valor">
                      <option :value="s.valor" x-text="s.label"></option>
                    </template>
                  </select>
                </div>
                
                <div>
                  <label style="display: block; margin-bottom: 5px; font-weight: bold;">Disponibilidade</label>
                  <input type="text" x-model="formulario.disponibilidade" placeholder="Ex: S√°bados √† tarde" style="width: 100%; padding: 10px; border: 1px solid var(--cinza-leve); border-radius: 5px;">
                </div>
                
                <div style="grid-column: span 2;">
                  <label style="display: block; margin-bottom: 5px; font-weight: bold;">Observa√ß√µes (apenas admin)</label>
                  <textarea x-model="formulario.observacoes" rows="2" style="width: 100%; padding: 10px; border: 1px solid var(--cinza-leve); border-radius: 5px;"></textarea>
                </div>
              </div>
              
              <div style="margin-top: 25px; display: flex; gap: 10px; justify-content: flex-end;">
                <button @click="fecharModal()" class="botao botao-secundario" :disabled="carregando">Cancelar</button>
                <button @click="salvar()" class="botao botao-primario" :disabled="carregando">
                  <span x-show="!carregando">Salvar</span>
                  <span x-show="carregando">Salvando...</span>
                </button>
              </div>
            </div>
          </div>
          
          <!-- Modal de Detalhes -->
          <div x-show="modalDetalhesAberto" 
               style="position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: rgba(0,0,0,0.5); z-index: 10000; display: flex; align-items: center; justify-content: center; padding: 20px;" 
               @click.self="fecharDetalhes()">
            <div style="background: white; padding: 30px; border-radius: 15px; max-width: 600px; width: 100%; max-height: 90vh; overflow-y: auto; margin: auto;" x-show="catecumenoSelecionado">
              <div style="display: flex; justify-content: space-between; align-items: start; margin-bottom: 20px;">
                <div>
                  <h3 style="margin: 0;" x-text="catecumenoSelecionado?.nome"></h3>
                  <span :class="getStatusBadge(catecumenoSelecionado?.status)" 
                        style="display: inline-block; padding: 4px 12px; border-radius: 20px; font-size: 0.8rem; margin-top: 5px;"
                        x-text="getStatusTexto(catecumenoSelecionado?.status)"></span>
                </div>
                <button @click="fecharDetalhes()" style="background: none; border: none; cursor: pointer; font-size: 24px; color: var(--cinza-medio);">&times;</button>
              </div>
              
              <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 15px;">
                <div>
                  <label style="font-size: 0.75rem; color: var(--cinza-medio); text-transform: uppercase;">Telefone</label>
                  <p style="margin: 2px 0 15px 0;" x-text="catecumenoSelecionado?.telefone || '-'"></p>
                </div>
                <div>
                  <label style="font-size: 0.75rem; color: var(--cinza-medio); text-transform: uppercase;">Email</label>
                  <p style="margin: 2px 0 15px 0;" x-text="catecumenoSelecionado?.email || '-'"></p>
                </div>
                <div>
                  <label style="font-size: 0.75rem; color: var(--cinza-medio); text-transform: uppercase;">Data de Nascimento</label>
                  <p style="margin: 2px 0 15px 0;" x-text="formatarData(catecumenoSelecionado?.data_nascimento)"></p>
                </div>
                <div>
                  <label style="font-size: 0.75rem; color: var(--cinza-medio); text-transform: uppercase;">Estado Civil</label>
                  <p style="margin: 2px 0 15px 0;" x-text="catecumenoSelecionado?.estado_civil || '-'"></p>
                </div>
                <div style="grid-column: span 2;">
                  <label style="font-size: 0.75rem; color: var(--cinza-medio); text-transform: uppercase;">Endere√ßo</label>
                  <p style="margin: 2px 0 15px 0;" x-text="catecumenoSelecionado?.endereco || '-'"></p>
                </div>
                <div>
                  <label style="font-size: 0.75rem; color: var(--cinza-medio); text-transform: uppercase;">Profiss√£o</label>
                  <p style="margin: 2px 0 15px 0;" x-text="catecumenoSelecionado?.profissao || '-'"></p>
                </div>
                <div>
                  <label style="font-size: 0.75rem; color: var(--cinza-medio); text-transform: uppercase;">Turma</label>
                  <p style="margin: 2px 0 15px 0;" x-text="catecumenoSelecionado?.turma?.nome || 'Sem turma'"></p>
                </div>
                <div>
                  <label style="font-size: 0.75rem; color: var(--cinza-medio); text-transform: uppercase;">Batizado?</label>
                  <p style="margin: 2px 0 15px 0;" x-text="catecumenoSelecionado?.ja_batizado ? 'Sim' : 'N√£o'"></p>
                </div>
                <div x-show="catecumenoSelecionado?.ja_batizado">
                  <label style="font-size: 0.75rem; color: var(--cinza-medio); text-transform: uppercase;">Igreja Anterior</label>
                  <p style="margin: 2px 0 15px 0;" x-text="catecumenoSelecionado?.igreja_anterior || '-'"></p>
                </div>
                <div style="grid-column: span 2;">
                  <label style="font-size: 0.75rem; color: var(--cinza-medio); text-transform: uppercase;">Como conheceu</label>
                  <p style="margin: 2px 0 15px 0;" x-text="catecumenoSelecionado?.como_conheceu || '-'"></p>
                </div>
                <div style="grid-column: span 2;">
                  <label style="font-size: 0.75rem; color: var(--cinza-medio); text-transform: uppercase;">Motiva√ß√£o</label>
                  <p style="margin: 2px 0 15px 0;" x-text="catecumenoSelecionado?.motivacao || '-'"></p>
                </div>
                <div style="grid-column: span 2;">
                  <label style="font-size: 0.75rem; color: var(--cinza-medio); text-transform: uppercase;">Observa√ß√µes</label>
                  <p style="margin: 2px 0 15px 0;" x-text="catecumenoSelecionado?.observacoes || '-'"></p>
                </div>
                <div>
                  <label style="font-size: 0.75rem; color: var(--cinza-medio); text-transform: uppercase;">Data de Inscri√ß√£o</label>
                  <p style="margin: 2px 0 15px 0;" x-text="formatarDataHora(catecumenoSelecionado?.created_at)"></p>
                </div>
              </div>
              
              <div style="margin-top: 20px; display: flex; gap: 10px; justify-content: flex-end; border-top: 1px solid var(--cinza-leve); padding-top: 20px;">
                <button @click="abrirModal(catecumenoSelecionado); fecharDetalhes();" class="botao botao-primario">
                  <span class="material-icons" style="vertical-align: middle; font-size: 18px;">edit</span>
                  Editar
                </button>
                <button @click="deletar(catecumenoSelecionado?.id)" class="botao botao-secundario" style="color: var(--vermelho);">
                  <span class="material-icons" style="vertical-align: middle; font-size: 18px;">delete</span>
                  Excluir
                </button>
              </div>
            </div>
          </div>
        </div>
        
        <!-- ==================== TURMAS CATEC√öMENOS ==================== -->
        <div x-show="secaoAtiva === 'turmas-catecumenos'" x-data="crudTurmasCatecumenos()" x-init="init()" x-transition>
          <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 30px; flex-wrap: wrap; gap: 15px;">
            <div>
              <h2 style="margin: 0;">Gerenciar Turmas de Catec√∫menos</h2>
              <p style="color: var(--cinza-medio); font-size: 0.9rem; margin-top: 5px;">
                Configure as turmas e classes de catec√∫menos
              </p>
            </div>
            <button @click="abrirModal()" class="botao botao-primario">
              <span class="material-icons" style="vertical-align: middle;">add</span>
              Nova Turma
            </button>
          </div>
          
          <div x-show="carregando" class="text-center" style="padding: 40px;">
            <div class="spinner" style="margin: 0 auto;"></div>
            <p>Carregando...</p>
          </div>
          
          <div x-show="!carregando">
            <!-- Cards de Turmas -->
            <div style="display: grid; grid-template-columns: repeat(auto-fill, minmax(320px, 1fr)); gap: 20px;">
              <template x-for="turma in turmas" :key="turma.id">
                <div class="card" style="padding: 20px; border-left: 4px solid var(--verde-escuro);">
                  <div style="display: flex; justify-content: space-between; align-items: start; margin-bottom: 15px;">
                    <div>
                      <h4 style="margin: 0 0 5px 0;" x-text="turma.nome"></h4>
                      <div style="display: flex; flex-wrap: wrap; gap: 6px; align-items: center;">
                        <span :class="getStatusBadge(turma.status)" 
                              style="display: inline-block; padding: 3px 10px; border-radius: 15px; font-size: 0.75rem;"
                              x-text="getStatusTexto(turma.status)"></span>
                        <!-- Badge de Visibilidade -->
                        <span x-show="!turma.nivel_acesso || turma.nivel_acesso.includes('visitante')" 
                              style="background: #4CAF50; color: white; padding: 3px 8px; border-radius: 12px; font-size: 0.7rem;">
                          üåê P√∫blico
                        </span>
                        <span x-show="turma.nivel_acesso && !turma.nivel_acesso.includes('visitante') && turma.nivel_acesso.includes('membro')" 
                              style="background: #2196F3; color: white; padding: 3px 8px; border-radius: 12px; font-size: 0.7rem;">
                          üë• Membros
                        </span>
                        <span x-show="turma.nivel_acesso && !turma.nivel_acesso.includes('membro') && turma.nivel_acesso.includes('lideranca')" 
                              style="background: #FF9800; color: white; padding: 3px 8px; border-radius: 12px; font-size: 0.7rem;">
                          üëî Lideran√ßa
                        </span>
                      </div>
                    </div>
                    <div style="display: flex; gap: 5px;">
                      <button @click="abrirModal(turma)" class="botao botao-pequeno" title="Editar">
                        <span class="material-icons" style="font-size: 16px;">edit</span>
                      </button>
                      <button @click="deletar(turma.id)" class="botao botao-pequeno botao-secundario" title="Deletar">
                        <span class="material-icons" style="font-size: 16px;">delete</span>
                      </button>
                    </div>
                  </div>
                  
                  <p x-show="turma.descricao" style="color: var(--cinza-medio); font-size: 0.9rem; margin: 0 0 15px 0;" x-text="turma.descricao"></p>
                  
                  <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 10px; font-size: 0.85rem;">
                    <div>
                      <span class="material-icons" style="font-size: 16px; vertical-align: middle; color: var(--verde-escuro);">calendar_today</span>
                      <span x-text="formatarDiaSemana(turma.dia_semana)"></span>
                    </div>
                    <div>
                      <span class="material-icons" style="font-size: 16px; vertical-align: middle; color: var(--verde-escuro);">schedule</span>
                      <span x-text="turma.horario || '-'"></span>
                    </div>
                    <div>
                      <span class="material-icons" style="font-size: 16px; vertical-align: middle; color: var(--verde-escuro);">place</span>
                      <span x-text="turma.local || '-'"></span>
                    </div>
                    <div>
                      <span class="material-icons" style="font-size: 16px; vertical-align: middle; color: var(--verde-escuro);">person</span>
                      <span x-text="turma.instrutor || '-'"></span>
                    </div>
                  </div>
                  
                  <div style="margin-top: 15px; padding-top: 15px; border-top: 1px solid var(--cinza-leve); display: flex; justify-content: space-between; align-items: center;">
                    <div>
                      <span style="font-size: 1.5rem; font-weight: bold; color: var(--verde-escuro);" x-text="turma.inscritos || 0"></span>
                      <span style="color: var(--cinza-medio);">/ <span x-text="turma.vagas"></span> vagas</span>
                    </div>
                    <div style="font-size: 0.85rem; color: var(--cinza-medio);">
                      Etapa <span x-text="turma.etapa_atual"></span> de <span x-text="turma.total_etapas"></span>
                    </div>
                  </div>
                  
                  <div style="margin-top: 10px; background: var(--cinza-muito-claro); border-radius: 5px; height: 6px; overflow: hidden;">
                    <div :style="`width: ${(turma.etapa_atual / turma.total_etapas) * 100}%; background: var(--verde-escuro); height: 100%;`"></div>
                  </div>
                </div>
              </template>
              
              <div x-show="turmas.length === 0" style="grid-column: span 2; text-align: center; padding: 40px; color: var(--cinza-medio);">
                <span class="material-icons" style="font-size: 48px; opacity: 0.5;">groups</span>
                <p>Nenhuma turma cadastrada</p>
                <button @click="abrirModal()" class="botao botao-primario" style="margin-top: 15px;">
                  Criar primeira turma
                </button>
              </div>
            </div>
          </div>
          
          <!-- Modal de Edi√ß√£o/Cria√ß√£o Turma -->
          <div x-show="modalAberto" 
               style="position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: rgba(0,0,0,0.5); z-index: 10000; display: flex; align-items: center; justify-content: center; padding: 20px;" 
               @click.self="fecharModal()">
            <div style="background: white; padding: 30px; border-radius: 15px; max-width: 600px; width: 100%; max-height: 90vh; overflow-y: auto; margin: auto;">
              <h3 x-text="turmaEditando ? 'Editar Turma' : 'Nova Turma'"></h3>
              
              <div style="margin-top: 20px;">
                <label style="display: block; margin-bottom: 5px; font-weight: bold;">Nome da Turma *</label>
                <input type="text" x-model="formulario.nome" placeholder="Ex: Turma 2025.1 - Introdu√ß√£o" style="width: 100%; padding: 10px; border: 1px solid var(--cinza-leve); border-radius: 5px;" required>
              </div>
              
              <div style="margin-top: 15px;">
                <label style="display: block; margin-bottom: 5px; font-weight: bold;">Descri√ß√£o</label>
                <textarea x-model="formulario.descricao" rows="2" placeholder="Descri√ß√£o da turma..." style="width: 100%; padding: 10px; border: 1px solid var(--cinza-leve); border-radius: 5px;"></textarea>
              </div>
              
              <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 15px; margin-top: 15px;">
                <div>
                  <label style="display: block; margin-bottom: 5px; font-weight: bold;">Data de In√≠cio *</label>
                  <input type="date" x-model="formulario.data_inicio" style="width: 100%; padding: 10px; border: 1px solid var(--cinza-leve); border-radius: 5px;" required>
                </div>
                <div>
                  <label style="display: block; margin-bottom: 5px; font-weight: bold;">Data de T√©rmino</label>
                  <input type="date" x-model="formulario.data_fim" style="width: 100%; padding: 10px; border: 1px solid var(--cinza-leve); border-radius: 5px;">
                </div>
              </div>
              
              <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 15px; margin-top: 15px;">
                <div>
                  <label style="display: block; margin-bottom: 5px; font-weight: bold;">Dia da Semana</label>
                  <select x-model="formulario.dia_semana" style="width: 100%; padding: 10px; border: 1px solid var(--cinza-leve); border-radius: 5px;">
                    <option value="">Selecione...</option>
                    <template x-for="dia in diasSemana" :key="dia.valor">
                      <option :value="dia.valor" x-text="dia.label"></option>
                    </template>
                  </select>
                </div>
                <div>
                  <label style="display: block; margin-bottom: 5px; font-weight: bold;">Hor√°rio</label>
                  <input type="text" x-model="formulario.horario" placeholder="Ex: 19:00 - 20:30" style="width: 100%; padding: 10px; border: 1px solid var(--cinza-leve); border-radius: 5px;">
                </div>
              </div>
              
              <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 15px; margin-top: 15px;">
                <div>
                  <label style="display: block; margin-bottom: 5px; font-weight: bold;">Local</label>
                  <input type="text" x-model="formulario.local" placeholder="Ex: Sala 3" style="width: 100%; padding: 10px; border: 1px solid var(--cinza-leve); border-radius: 5px;">
                </div>
                <div>
                  <label style="display: block; margin-bottom: 5px; font-weight: bold;">Instrutor</label>
                  <input type="text" x-model="formulario.instrutor" placeholder="Nome do instrutor" style="width: 100%; padding: 10px; border: 1px solid var(--cinza-leve); border-radius: 5px;">
                </div>
              </div>
              
              <div style="display: grid; grid-template-columns: 1fr 1fr 1fr; gap: 15px; margin-top: 15px;">
                <div>
                  <label style="display: block; margin-bottom: 5px; font-weight: bold;">Vagas</label>
                  <input type="number" x-model="formulario.vagas" min="1" style="width: 100%; padding: 10px; border: 1px solid var(--cinza-leve); border-radius: 5px;">
                </div>
                <div>
                  <label style="display: block; margin-bottom: 5px; font-weight: bold;">Etapa Atual</label>
                  <input type="number" x-model="formulario.etapa_atual" min="1" style="width: 100%; padding: 10px; border: 1px solid var(--cinza-leve); border-radius: 5px;">
                </div>
                <div>
                  <label style="display: block; margin-bottom: 5px; font-weight: bold;">Total de Etapas</label>
                  <input type="number" x-model="formulario.total_etapas" min="1" style="width: 100%; padding: 10px; border: 1px solid var(--cinza-leve); border-radius: 5px;">
                </div>
              </div>
              
              <div style="margin-top: 15px;">
                <label style="display: block; margin-bottom: 5px; font-weight: bold;">Status</label>
                <select x-model="formulario.status" style="width: 100%; padding: 10px; border: 1px solid var(--cinza-leve); border-radius: 5px;">
                  <template x-for="s in statusOptions" :key="s.valor">
                    <option :value="s.valor" x-text="s.label"></option>
                  </template>
                </select>
              </div>
              
              <!-- Links de Acesso (Google Meet e WhatsApp) -->
              <div style="margin-top: 20px; padding: 15px; background: #e3f2fd; border-radius: 10px; border: 1px solid #90caf9;">
                <h4 style="margin: 0 0 15px 0; color: #1565c0; font-size: 1rem; display: flex; align-items: center; gap: 8px;">
                  <span class="material-icons">link</span>
                  Links de Acesso para Inscritos
                </h4>
                
                <div style="margin-bottom: 15px;">
                  <label style="display: block; margin-bottom: 5px; font-weight: bold; color: #333;">
                    <span class="material-icons" style="font-size: 18px; vertical-align: middle; color: #4285f4;">videocam</span>
                    Link do Google Meet
                  </label>
                  <input type="url" x-model="formulario.link_google_meet" placeholder="https://meet.google.com/xxx-xxxx-xxx" style="width: 100%; padding: 10px; border: 1px solid var(--cinza-leve); border-radius: 5px;">
                  <small style="color: #666; font-size: 0.8rem;">Link da sala virtual para os encontros da turma</small>
                </div>
                
                <div>
                  <label style="display: block; margin-bottom: 5px; font-weight: bold; color: #333;">
                    <span class="material-icons" style="font-size: 18px; vertical-align: middle; color: #25d366;">chat</span>
                    Link do Grupo WhatsApp
                  </label>
                  <input type="url" x-model="formulario.link_whatsapp" placeholder="https://chat.whatsapp.com/xxxxxxxxxx" style="width: 100%; padding: 10px; border: 1px solid var(--cinza-leve); border-radius: 5px;">
                  <small style="color: #666; font-size: 0.8rem;">Link de convite para o grupo da turma no WhatsApp</small>
                </div>
              </div>
              
              <!-- N√≠vel de Acesso -->
              <div style="margin-top: 20px; padding: 15px; background: #f3f4f6; border-radius: 10px; border: 1px solid #e5e7eb;">
                <h4 style="margin: 0 0 15px 0; color: #1f2937; font-size: 1rem; display: flex; align-items: center; gap: 8px;">
                  <span class="material-icons">visibility</span>
                  Quem pode ver esta turma?
                </h4>
                
                <div style="display: flex; flex-wrap: wrap; gap: 8px; margin-bottom: 12px;">
                  <button type="button" 
                    @click="formulario.nivel_acesso = ['visitante', 'membro', 'lideranca', 'administracao']" 
                    class="btn-nivel-acesso"
                    :class="{'ativo': formulario.nivel_acesso && formulario.nivel_acesso.includes('visitante')}"
                  >
                    <span class="material-icons" style="color: #1A4731;">public</span> Todos (P√∫blico)
                  </button>
                  <button type="button" 
                    @click="formulario.nivel_acesso = ['membro', 'lideranca', 'administracao']" 
                    class="btn-nivel-acesso"
                    :class="{'ativo': formulario.nivel_acesso && !formulario.nivel_acesso.includes('visitante') && formulario.nivel_acesso.includes('membro')}"
                  >
                    <span class="material-icons" style="color: #2D5F4A;">people</span> Apenas Membros
                  </button>
                  <button type="button" 
                    @click="formulario.nivel_acesso = ['lideranca', 'administracao']" 
                    class="btn-nivel-acesso"
                    :class="{'ativo': formulario.nivel_acesso && !formulario.nivel_acesso.includes('membro') && formulario.nivel_acesso.includes('lideranca')}"
                  >
                    <span class="material-icons" style="color: #C8A45C;">admin_panel_settings</span> Lideran√ßa
                  </button>
                </div>
                
                <small style="color: #6b7280; font-size: 0.8rem; display: block;">
                  <span class="material-icons" style="font-size: 14px; vertical-align: middle;">info</span>
                  Visitantes n√£o logados s√≥ ver√£o turmas marcadas como "P√∫blico"
                </small>
              </div>
              
              <div style="margin-top: 15px; display: flex; gap: 20px;">
                <label style="display: flex; align-items: center; gap: 10px;">
                  <input type="checkbox" x-model="formulario.requer_aprovacao">
                  <span>Requer aprova√ß√£o do admin</span>
                </label>
                <label style="display: flex; align-items: center; gap: 10px;">
                  <input type="checkbox" x-model="formulario.ativo">
                  <span>Ativo</span>
                </label>
              </div>
              
              <div style="margin-top: 25px; display: flex; gap: 10px; justify-content: flex-end;">
                <button @click="fecharModal()" class="botao botao-secundario" :disabled="carregando">Cancelar</button>
                <button @click="salvar()" class="botao botao-primario" :disabled="carregando">
                  <span x-show="!carregando">Salvar</span>
                  <span x-show="carregando">Salvando...</span>
                </button>
              </div>
            </div>
          </div>
        </div>
        
      </div>
      
    </main>
    
  </div>
  
  <!-- Scripts -->
  <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>
  <script src="../js/env-dev.js"></script>
  <script src="../js/config.js"></script>
  <script src="../js/supabase.js"></script>
  <script src="../js/auth.js"></script>
  <script src="../js/controle-acesso.js"></script>
  <script src="../js/nivel-acesso.js"></script>
  <script src="../js/data-manager.js"></script>
  <script src="../js/admin-crud.js"></script>
  <script src="../js/admin-crud-usuarios.js"></script>
  <script src="../js/youtube-sync.js"></script>
  <script src="../js/notificacoes.js"></script>
  <script src="../js/avisos-popup.js"></script>
  <script src="../js/devocionais.js"></script>
  <script src="../js/catecumenos.js"></script>
  <script src="../js/grupos-estudo.js"></script>
  <script src="../js/upload-imagens.js"></script>
  <script src="../js/email-notificacoes.js"></script>
  <script src="../js/notificacoes-automaticas.js"></script>
  
  <!-- Prote√ß√£o Inicial - Executar ANTES do Alpine.js -->
  <script>
    // PROTE√á√ÉO CR√çTICA: Verificar acesso antes de qualquer coisa
    document.addEventListener('DOMContentLoaded', function() {
      console.log('üîê PROTE√á√ÉO ADMIN: Verificando acesso...');
      
      // Log do caminho base detectado
      if (window.CONFIG) {
        window.CONFIG.logBasePath();
      }
      
      // Aguardar auth.js carregar
      setTimeout(function() {
        if (!window.auth) {
          console.log('‚ùå Sistema de autentica√ß√£o n√£o carregado');
          alert('Erro no sistema de autentica√ß√£o. Redirecionando...');
          const loginUrl = window.CONFIG ? window.CONFIG.buildPageUrl('login.html?force=true') : 'login.html?force=true';
          window.location.href = loginUrl;
          return;
        }
        
        // Verificar se est√° logado
        if (!auth.verificarSessaoAtiva()) {
          console.log('üö´ Usu√°rio n√£o autenticado - redirecionando para login');
          alert('‚ö†Ô∏è Voc√™ precisa fazer login para acessar esta √°rea.');
          const loginUrl = window.CONFIG ? window.CONFIG.buildPageUrl('login.html?force=true') : 'login.html?force=true';
          window.location.href = loginUrl;
          return;
        }
        
        // Verificar se √© admin
        if (!auth.ehAdmin()) {
          console.log('üö´ Usu√°rio n√£o √© admin:', auth.usuario ? auth.usuario.tipo : 'nenhum');
          alert('üö´ Acesso negado! Esta √°rea √© restrita para administradores.');
          const homeUrl = window.CONFIG ? window.CONFIG.buildUrl('index.html') : '../index.html';
          window.location.href = homeUrl;
          return;
        }
        
        console.log('‚úÖ Acesso autorizado para admin:', auth.usuario.nome);
      }, 100);
    });
  </script>
  
  <script>
    function adminPanel() {
      return {
        sidebarAberta: window.innerWidth > 768,
        secaoAtiva: 'dashboard',
        usuario: null,
        stats: {
          usuarios: 0,
          devocionais: 0,
          videos: 0,
          eventos: 0,
          visitantes: 0,
          turmas: 0,
          inscricoes: 0
        },
        
        get tituloPagina() {
          const titulos = {
            dashboard: 'Dashboard',
            usuarios: 'Usu√°rios',
            devocionais: 'Devocionais',
            videos: 'V√≠deos',
            programacao: 'Programa√ß√£o',
            eventos: 'Eventos',
            visitantes: 'Visitantes',
            'dados-igreja': 'Dados da Igreja',
            'redes-sociais': 'Redes Sociais',
            configuracoes: 'Configura√ß√µes'
          };
          return titulos[this.secaoAtiva] || 'Dashboard';
        },
        
        init() {
          // PRIMEIRA PRIORIDADE: Verificar autentica√ß√£o
          console.log('üîê Verificando acesso √† √°rea administrativa...');
          
          // Verificar se o usu√°rio est√° logado
          if (!auth.verificarSessaoAtiva()) {
            console.log('üö´ Usu√°rio n√£o logado - redirecionando para login');
            const loginUrl = window.CONFIG ? window.CONFIG.buildPageUrl('login.html') + '?force=true' : 'login.html?force=true';
            window.location.href = loginUrl;
            return;
          }
          
          // Verificar se o usu√°rio √© admin
          if (!auth.ehAdmin()) {
            console.log('üö´ Usu√°rio n√£o √© admin - redirecionando para home');
            alert('‚ö†Ô∏è Acesso negado! √Årea restrita para administradores.');
            const homeUrl = window.CONFIG ? window.CONFIG.buildUrl('index.html') : '../index.html';
            window.location.href = homeUrl;
            return;
          }
          
          console.log('‚úÖ Acesso autorizado para:', auth.usuario.nome);
          
          // Continuar com a inicializa√ß√£o normal
          this.usuario = auth.usuario;
          this.carregarEstatisticas();
          
          // Responsive sidebar
          window.addEventListener('resize', () => {
            if (window.innerWidth <= 768) {
              this.sidebarAberta = false;
            } else {
              this.sidebarAberta = true;
            }
          });
        },
        
        async carregarEstatisticas() {
          try {
            // Carregar dados para estat√≠sticas do Supabase
            if (window.supabaseClient && window.supabaseClient.client) {
              const [usuarios, devocionais, videos, programacao, eventos, visitantes, turmas, inscricoes] = await Promise.all([
                window.supabaseClient.listar('usuarios').catch(() => []),
                window.supabaseClient.listar('devocionais').catch(() => []),
                window.supabaseClient.listar('videos').catch(() => []),
                window.supabaseClient.listar('programacao').catch(() => []),
                window.supabaseClient.listar('eventos').catch(() => []),
                window.supabaseClient.listar('visitantes').catch(() => []),
                window.supabaseClient.listar('turmas_catecumenos').catch(() => []),
                window.supabaseClient.listar('inscricoes_catecumenos').catch(() => [])
              ]);
              
              this.stats = {
                usuarios: Array.isArray(usuarios) ? usuarios.length : 0,
                devocionais: Array.isArray(devocionais) ? devocionais.length : 0,
                videos: Array.isArray(videos) ? videos.length : 0,
                eventos: Array.isArray(eventos) ? eventos.length : 0,
                visitantes: Array.isArray(visitantes) ? visitantes.length : 0,
                turmas: Array.isArray(turmas) ? turmas.length : 0,
                inscricoes: Array.isArray(inscricoes) ? inscricoes.length : 0
              };
            } else {
              // Fallback para JSONs (tempor√°rio)
              const [usuarios, devocionais, videos, programacao, visitantes] = await Promise.all([
                fetch('../data/usuarios.json').then(r => r.json()).catch(() => ({ usuarios: [] })),
                dataManager.carregarDevocionais().catch(() => ({})),
                dataManager.carregarVideos().catch(() => ({ videos: [] })),
                dataManager.carregarProgramacao().catch(() => ({ eventos: [] })),
                fetch('../data/visitantes.json').then(r => r.json()).catch(() => ({ visitantes: [] }))
              ]);
              
              this.stats = {
                usuarios: usuarios.usuarios?.length || 0,
                devocionais: Object.keys(devocionais || {}).length,
                videos: videos?.videos?.length || 0,
                eventos: programacao?.eventos?.length || 0,
                visitantes: visitantes?.visitantes?.length || 0
              };
            }
          } catch (erro) {
            console.error('Erro ao carregar estat√≠sticas:', erro);
            // Valores padr√£o em caso de erro
            this.stats = {
              usuarios: 0,
              devocionais: 0,
              videos: 0,
              eventos: 0,
              visitantes: 0
            };
          }
        },
        
        toggleSidebar() {
          this.sidebarAberta = !this.sidebarAberta;
        },
        
        mudarSecao(secao) {
          this.secaoAtiva = secao;
          
          // Atualizar nav links
          document.querySelectorAll('.nav-link').forEach(link => {
            link.classList.remove('ativo');
          });
          
          const linkAtivo = document.querySelector(`[href="#${secao}"]`);
          if (linkAtivo) {
            linkAtivo.classList.add('ativo');
          }
          
          // Fechar sidebar no mobile
          if (window.innerWidth <= 768) {
            this.sidebarAberta = false;
          }
        },
        
        logout() {
          auth.logout();
        }
      };
    }
  </script>
  
  <!-- Atualizar links dinamicamente para funcionar em dev e produ√ß√£o -->
  <script>
    document.addEventListener('DOMContentLoaded', () => {
      if (window.CONFIG) {
        window.CONFIG.atualizarLinks();
        
        // Atualizar link "Ver Site" especificamente
        const linkVerSite = document.getElementById('link-ver-site');
        if (linkVerSite) {
          linkVerSite.href = window.CONFIG.buildUrl('index.html');
        }
      }
    });
  </script>
  
</body>
</html>